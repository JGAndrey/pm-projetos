!function(e){function t(t){for(var a,o,i=t[0],u=t[1],c=t[2],d=0,m=[];d<i.length;d++)o=i[d],r[o]&&m.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);for(l&&l(t);m.length;)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var l=u;s.push([411,1]),n()}({107:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(93),o=n(390);t.FullScreenMessage=function(e){var t=e.title,n=e.message,a=e.buttonTitle,i=e.onClick,u=e.opacity,c=void 0===u?1:u;return r.default.createElement("div",{style:{height:"100vh",width:"100vw",position:"absolute",zIndex:1,opacity:c}},r.default.createElement(s.Backdrop,{open:!0},r.default.createElement(o.Alert,{variant:"outlined",severity:"error",action:r.default.createElement(s.Button,{color:"inherit",size:"small",onClick:i},a)},r.default.createElement(o.AlertTitle,null,t),n)))}},109:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(64),o=n(487),i=n(386),u=n(36),c=n(19),l=n(32),d=n(491),m=function(e){function t(){var n=e.call(this,"BattleScene")||this;return t.currentInstance=n,n}return r(t,e),t.prototype.create=function(){var e=this;c.GameVars.currentScene=this,this.needSoundMusic=!0,this.cameras.main.setBackgroundColor(24),u.BattleManager.init(),this.boardContainer=new s.BoardContainer(this),this.add.existing(this.boardContainer),this.hud=new i.HUD(this),this.add.existing(this.hud),this.gui=new o.GUI(this),this.add.existing(this.gui),this.input.on("pointerdown",function(){e.needSoundMusic&&(e.needSoundMusic=!1,l.AudioManager.playMusic("alt_soundtrack",1,.5))},this)},t.prototype.update=function(e,t){c.GameVars.paused||c.GameVars.semipaused||c.GameVars.waveOver||(u.BattleManager.update(e,t),this.boardContainer.update(e,t)),this.hud.update(e,t)},t.prototype.createTurret=function(e){this.gui.createTurret(e),this.boardContainer.hideTurretMenu(),this.boardContainer.hideRangeCircles()},t.prototype.updateTurretMenu=function(){this.boardContainer.updateTurretMenu()},t.prototype.showFxEnemyTraspass=function(){var e=new d.FxEnemyTraspass(this);this.add.existing(e)},t}(Phaser.Scene);t.BattleScene=m},110:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(478),i=n(109),u=n(64),c=n(23),l=n(36),d=n(19),m=s(n(29)),h=function(e){function t(t,n,a,r){var s=e.call(this,t)||this;s.p=a,s.name=n,s.showLevel=!1,s.setScale(.82),s.turret=r,s.id=s.turret.id,s.x=c.GameConstants.CELLS_SIZE*(s.p.c+.5),s.y=c.GameConstants.CELLS_SIZE*(s.p.r+.5),s.canonLength=40;var i="";switch(n){case m.GameConstants.TURRET_LAUNCH:i="yellow";break;case m.GameConstants.TURRET_PROJECTILE:i="green";break;case m.GameConstants.TURRET_LASER:i="pink";break;case m.GameConstants.TURRET_GLUE:i="blue"}return s.rangeCircle=l.BattleManager.createRangeCircle(s.turret.range*c.GameConstants.CELLS_SIZE,s.x,s.y,i),s.turretLevel=new o.TurretLevel(s.scene,s),s.add(s.turretLevel),s.scene.sys.updateList.add(s),s}return r(t,e),t.prototype.preUpdate=function(e,t){this.turretLevel.update()},t.prototype.update=function(e,t){var n=this.turret.getEnemiesWithinRange();if(this.turret.fixedTarget?n.length>0&&-1===n.indexOf(this.followedEnemy)&&(this.followedEnemy=n[0]):n.length>0&&(this.followedEnemy=n[0]),this.followedEnemy){var a=u.BoardContainer.currentInstance.getEnemyActorByID(this.followedEnemy.id);if(a){var r=a.x-this.x,s=a.y-this.y;this.canon&&(this.canon.rotation=Math.atan2(s,r)+Math.PI/2)}}},t.prototype.upgrade=function(){this.reloadRangeCircle()},t.prototype.improve=function(){this.reloadRangeCircle()},t.prototype.reloadRangeCircle=function(){this.rangeCircle.setScale(1),this.rangeCircle.setScale(this.turret.range*c.GameConstants.CELLS_SIZE*2/this.rangeCircle.width)},t.prototype.shoot=function(){},t.prototype.onDownTurret=function(){d.GameVars.currentScene===i.BattleScene.currentInstance&&(d.GameVars.paused||l.BattleManager.engine.gameOver||(this.rangeCircle.visible?l.BattleManager.showTurretMenu(this.turret):(l.BattleManager.hideTurretMenu(),l.BattleManager.hideRangeCircles(),this.rangeCircle.visible=!0)))},t.prototype.onOverTurret=function(){this.showLevel=!0},t.prototype.onOutTurret=function(){this.showLevel=!1},t}(Phaser.GameObjects.Container);t.TurretActor=h},162:function(e,t,n){"use strict";var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{u(a.next(e))}catch(e){s(e)}}function i(e){try{u(a.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,i)}u((a=a.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,a,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=new Headers;s.append("Content-Type","application/json"),t.http=function(e){return new Promise(function(t,n){var a;fetch(e).then(function(e){return a=e,204!==e.status?e.json():null}).then(function(e){if(a.ok)a.parsedBody=e,t(a);else{var r=e.description||e.title||a.statusText||"Error "+a.status;n(new Error(r))}}).catch(function(e){return n(e)})})},t.get=function(e,n){return void 0===n&&(n={method:"get"}),a(void 0,void 0,void 0,function(){return r(this,function(a){switch(a.label){case 0:return[4,t.http(new Request(e,n))];case 1:return[2,a.sent()]}})})},t.post=function(e,n,o){return void 0===o&&(o={method:"post",body:JSON.stringify(n),headers:s}),a(void 0,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,t.http(new Request(e,o))];case 1:return[2,n.sent()]}})})},t.put=function(e,n,o){return void 0===o&&(o={method:"put",body:JSON.stringify(n),headers:s}),a(void 0,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,t.http(new Request(e,o))];case 1:return[2,n.sent()]}})})}},163:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(440));t.apiUrl=r.default("API_URL"),t.contestUrl="https://contest.creepts.io"},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.formatTime=function(e){if(isNaN(e)||e>86400)return{str:"0:00:00",h:"00",m:"00",s:"00"};var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),a=e-3600*t-60*n,r=t.toString(),s=n.toString(),o=a.toString();return t<10&&(r="0"+t),n<10&&(s="0"+n),a<10&&(o="0"+a),{str:r+":"+s+":"+o,h:r,m:s,s:o}},e.formatNumber=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},e.showGameOverLayer=!0,e}();t.GameVars=a},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.VERSION="0.0",e.DEVELOPMENT=!1,e.GAME_ONLY=!1,e.DOWNLOAD=!1,e.SHOW_DEBUG_GEOMETRY=!1,e.INTERPOLATE_TRAJECTORIES=!0,e.VERBOSE=!1,e.GAME_WIDTH=768,e.GAME_HEIGHT=1024,e.TIME_STEP=100,e.CELLS_SIZE=60,e.SAVED_GAME_DATA_KEY="creepts-data",e}();t.GameConstants=a},255:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=n(162),o=n(163),i=a(n(442));t.getTournament=function(e){return s.get(o.apiUrl+"/tournaments/"+e)},t.getTournaments=function(e,t){var n=i.default.stringify({phase:e,me:t}),a=o.apiUrl+"/tournaments"+(n&&"?"+n);return s.get(a)},t.useTournamentService=function(e){var n=r.useState({status:"loading"}),a=n[0],s=n[1];return r.useEffect(function(){t.getTournament(e).then(function(e){return s({status:"loaded",payload:e.parsedBody})}).catch(function(e){return s({status:"error",error:e})})},[]),a},t.useTournamentsService=function(e,n){var a=r.useState({status:"loading"}),s=a[0],o=a[1];return r.useEffect(function(){t.getTournaments(e,n).then(function(e){return o({status:"loaded",payload:e.parsedBody})}).catch(function(e){return o({status:"error",error:e})})},[]),s}},256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(162),s=n(163),o=n(255);t.putScore=function(e,t){return r.put(s.apiUrl+"/tournaments/"+e+"/scores/my",t)},t.getScore=function(e,t){return r.get(s.apiUrl+"/tournaments/"+e+"/scores/"+t)},t.useScoreSubmitService=function(e,n){var r=a.useState({status:"loading"}),s=r[0],o=r[1];return a.useEffect(function(){t.putScore(e,n).then(function(e){return o({status:"loaded",payload:e.parsedBody})}).catch(function(e){return o({status:"error",error:e})})},[]),s};t.useScoreService=function(e,n){var r,s,i,u=a.useState({status:"loading"}),c=u[0],l=u[1],d=a.useState(!0),m=d[0],h=d[1];return r=function(){o.getTournament(e).then(function(a){var r=a.parsedBody;t.getScore(e,n).then(function(e){if(202==e.status){var t=e.parsedBody;l({status:"loading",progress:t.progress})}else l({status:"loaded",payload:[r,e.parsedBody]}),h(!1)}).catch(function(e){l({status:"error",error:new Error("score: "+e.message)}),h(!1)})}).catch(function(e){l({status:"error",error:new Error("tournament: "+e.message)}),h(!1)})},s=m?1e3:null,i=a.useRef(),a.useEffect(function(){i.current=r},[r]),a.useEffect(function(){if(null!==s){var e=setInterval(function(){i.current()},s);return function(){return clearInterval(e)}}},[s]),c}},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(438);var a=n(19),r=n(35),s=function(){function e(){}return e.init=function(){e.sound.mute(a.GameVars.gameData.soundMuted),e.music.mute(a.GameVars.gameData.musicMuted),e.music.on("fade",function(){})},e.toggleSoundState=function(){a.GameVars.gameData.soundMuted=!a.GameVars.gameData.soundMuted,r.GameManager.writeGameData(),e.sound.mute(a.GameVars.gameData.soundMuted)},e.toggleMusicState=function(){a.GameVars.gameData.musicMuted=!a.GameVars.gameData.musicMuted,r.GameManager.writeGameData(),e.music.mute(a.GameVars.gameData.musicMuted)},e.playSound=function(t,n,a,r){n=n||!1,a=a||1,r=r||1;var s=e.sound.play(t);e.sound.loop(n,s),e.sound.rate(r,s),e.sound.volume(a,s)},e.playMusic=function(t,n,a){if(e.backgroundKeyMusic===t)return e.music.rate(n,e.backgroundIdMusic),void e.music.volume(a||1,e.backgroundIdMusic);e.backgroundKeyMusic=t,n=n||1,a=a||1,e.music.fade(1,0,500,e.backgroundIdMusic),e.backgroundIdMusic=e.music.play(t),e.music.fade(0,a,500,e.backgroundIdMusic),e.music.loop(!0,e.backgroundIdMusic),e.music.rate(n,e.backgroundIdMusic)},e.stopMusic=function(){e.music.fade(e.music.volume(e.backgroundIdMusic),0,500,e.backgroundIdMusic)},e.setMusicRate=function(t){e.music.rate(t,e.backgroundIdMusic)},e.setMusicVolume=function(t){e.music.volume(t,e.backgroundIdMusic)},e}();t.AudioManager=s},35:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),s=n(23),o=n(19),i=n(32),u=a(n(439)),c=function(){function e(){}return e.init=function(){if(o.GameVars.mapsData=["original","waiting_line","turn_round","hurry","civyshk_yard","civyshk_2y","civyshk_line5","civyshk_labyrinth"].map(r.loadMap),o.GameVars.currentScene.sys.game.device.os.desktop)o.GameVars.scaleY=1,o.GameVars.scaleCorrectionFactor=1;else{o.GameVars.currentScene.game.scale.displaySize=o.GameVars.currentScene.game.scale.parentSize,o.GameVars.currentScene.game.scale.refresh();var t=window.innerHeight/window.innerWidth;o.GameVars.scaleY=s.GameConstants.GAME_HEIGHT/s.GameConstants.GAME_WIDTH/t,o.GameVars.scaleCorrectionFactor=t>1.5?1.2:t<1.33?.8:1}e.readGameData()},e.readGameData=function(){e.getGameStorageData(s.GameConstants.SAVED_GAME_DATA_KEY,function(t){o.GameVars.gameData=t?JSON.parse(t):{soundMuted:!1,musicMuted:!1,scores:[],currentMapIndex:0},e.startGame(0)})},e.setCurrentScene=function(e){o.GameVars.currentScene=e},e.onGameAssetsLoaded=function(){i.AudioManager.init(),e.enterBattleScene()},e.mapSelected=function(t){o.GameVars.currentMapData=o.GameVars.mapsData[t],o.GameVars.gameData.currentMapIndex=t,e.writeGameData(),e.enterBattleScene()},e.enterBattleScene=function(){o.GameVars.currentScene.scene.start("BattleScene")},e.enterLogScene=function(e,t){o.GameVars.logsObject=e,o.GameVars.initialLogsObjects=JSON.parse(JSON.stringify(o.GameVars.logsObject)),o.GameVars.levelObject=t,o.GameVars.currentScene.scene.start("LogScene")},e.enterMapScene=function(){o.GameVars.currentScene.scene.start("MapsScene")},e.reset=function(){e.enterBattleScene()},e.writeGameData=function(){e.setGameStorageData(s.GameConstants.SAVED_GAME_DATA_KEY,o.GameVars.gameData,function(){e.log("game data successfully saved")})},e.log=function(e,t){s.GameConstants.VERBOSE&&(t?console.error(e+":",t):console.log(e))},e.startGame=function(e){if(0===o.GameVars.gameData.scores.length)for(var t=0;t<o.GameVars.mapsData.length;t++)o.GameVars.gameData.scores[t]=0;o.GameVars.gameData.currentMapIndex=e,o.GameVars.currentMapData=o.GameVars.mapsData[e],o.GameVars.currentScene.scene.start("PreloadScene")},e.getGameStorageData=function(e,t){t(localStorage.getItem(e))},e.setGameStorageData=function(e,t,n){localStorage.setItem(e,JSON.stringify(t)),n()},e.events=new u.default,e}();t.GameManager=c},36:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(29)),s=n(76),o=n(385),i=n(109),u=n(23),c=n(19),l=n(64),d=n(35),m=n(32),h=n(469),f=function(){function e(){}return e.init=function(){var t;window.innerHeight/window.innerWidth>1.5&&(c.GameVars.currentMapData.size.c>11?c.GameVars.scaleCorrectionFactor=1:c.GameVars.currentMapData.size.c>10?c.GameVars.scaleCorrectionFactor=1.1:c.GameVars.scaleCorrectionFactor=1.2),c.GameVars.currentScene===i.BattleScene.currentInstance?(c.GameVars.enemiesPathCells=c.GameVars.currentMapData.path,c.GameVars.plateausCells=c.GameVars.currentMapData.plateaus,c.GameVars.enemiesData=s.loadEnemies(),c.GameVars.turretsData=s.loadTurrets(),c.GameVars.wavesData=s.loadWaves(),t={timeStep:u.GameConstants.TIME_STEP,runningInClientSide:!0,enemySpawningDeltaTicks:r.GameConstants.ENEMY_SPAWNING_DELTA_TICKS,credits:r.GameConstants.INITIAL_CREDITS,lifes:r.GameConstants.INITIAL_LIFES,boardSize:c.GameVars.currentMapData.size,enemiesPathCells:c.GameVars.enemiesPathCells,plateausCells:c.GameVars.plateausCells},c.GameVars.logsObject={actions:[]}):(c.GameVars.enemiesPathCells=c.GameVars.levelObject.gameConfig.enemiesPathCells,c.GameVars.plateausCells=c.GameVars.levelObject.gameConfig.plateausCells,c.GameVars.enemiesData=c.GameVars.levelObject.enemiesData,c.GameVars.turretsData=c.GameVars.levelObject.turretsData,c.GameVars.wavesData=c.GameVars.levelObject.wavesData,t=c.GameVars.levelObject.gameConfig),c.GameVars.currentScene!==i.BattleScene.currentInstance&&c.GameVars.timeStepFactor||(c.GameVars.timeStepFactor=1),c.GameVars.currentWave=1,c.GameVars.paused=!1,c.GameVars.semipaused=!1,c.GameVars.waveOver=!0,c.GameVars.autoSendWave=!1,c.GameVars.loopNumber=1,c.GameVars.loopRate=1,c.GameVars.loopVolume=.2,c.GameVars.dangerRate=1,e.engine=new r.Engine(t,c.GameVars.enemiesData,c.GameVars.turretsData,c.GameVars.wavesData),e.setTimeStepFactor(c.GameVars.timeStepFactor),c.GameVars.currentScene===i.BattleScene.currentInstance&&(c.GameVars.levelObject={engineVersion:e.engine.version,gameConfig:t,enemiesData:c.GameVars.enemiesData,turretsData:c.GameVars.turretsData,wavesData:c.GameVars.wavesData}),e.engine.addEventListener(r.Event.ENEMY_SPAWNED,e.onEnemySpawned,e),e.engine.addEventListener(r.Event.ENEMY_REACHED_EXIT,e.onEnemyReachedExit,e),e.engine.addEventListener(r.Event.BULLET_SHOT,e.onBulletShot,e),e.engine.addEventListener(r.Event.GLUE_BULLET_SHOT,e.onGlueBulletShot,e),e.engine.addEventListener(r.Event.ENEMY_HIT,e.onEnemyHit,e),e.engine.addEventListener(r.Event.REMOVE_BULLET,e.removeBullet,e),e.engine.addEventListener(r.Event.REMOVE_GLUE_BULLET,e.removeGlueBullet,e),e.engine.addEventListener(r.Event.ENEMY_GLUE_HIT,e.onEnemyGlueHit,e),e.engine.addEventListener(r.Event.ENEMY_KILLED,e.onEnemyKilled,e),e.engine.addEventListener(r.Event.LASER_SHOT,e.onLaserBeamShot,e),e.engine.addEventListener(r.Event.MORTAR_SHOT,e.onMortarShot,e),e.engine.addEventListener(r.Event.GLUE_SHOT,e.onGlueShot,e),e.engine.addEventListener(r.Event.MINE_SHOT,e.onMineShot,e),e.engine.addEventListener(r.Event.GLUE_CONSUMED,e.onGlueConsumed,e),e.engine.addEventListener(r.Event.ENEMIES_TELEPORTED,e.onEnemiesTeleported,e),e.engine.addEventListener(r.Event.NO_ENEMIES_ON_STAGE,e.onNoEnemiesOnStage,e),e.engine.addEventListener(r.Event.WAVE_OVER,e.onWaveOver,e),e.engine.addEventListener(r.Event.GAME_OVER,e.onGameOver,e),e.engine.addEventListener(r.Event.ACTIVE_NEXT_WAVE,e.activeNextWave,e),d.GameManager.events.emit("ready")},e.update=function(t,n){e.engine.update()},e.pause=function(){c.GameVars.paused=!0},e.resume=function(){c.GameVars.paused=!1},e.semipause=function(){c.GameVars.semipaused=!0},e.semiresume=function(){c.GameVars.semipaused=!1},e.setTimeStepFactor=function(t){c.GameVars.timeStepFactor=t,e.engine.timeStep=u.GameConstants.TIME_STEP/t},e.newWave=function(){if(e.engine.newWave()){c.GameVars.waveOver=!1,c.GameVars.currentScene===i.BattleScene.currentInstance?i.BattleScene.currentInstance.hud.updateRound():o.LogScene.currentInstance.hud.updateRound();var t={type:r.GameConstants.ACTION_TYPE_NEXT_WAVE,tick:e.engine.ticksCounter};e.addAction(t)}},e.createTurret=function(e){c.GameVars.currentScene===i.BattleScene.currentInstance&&i.BattleScene.currentInstance.createTurret(e)},e.addTurretToScene=function(e,t){l.BoardContainer.currentInstance.addTurret(e,t)},e.addTurret=function(t,n){var a=e.engine.addTurret(t,n);if(a.turret){var s={type:r.GameConstants.ACTION_TYPE_ADD_TURRET,tick:e.engine.ticksCounter,turretType:a.turret.type,position:n};e.addAction(s)}return a.turret},e.sellTurret=function(t){if(e.engine.sellTurret(t).success){var n={type:r.GameConstants.ACTION_TYPE_SELL_TURRET,tick:e.engine.ticksCounter,id:t};e.addAction(n),l.BoardContainer.currentInstance.removeTurret(t)}},e.onClickMenu=function(){l.BoardContainer.currentInstance.showPauseMenu()},e.setAutoSendWave=function(e){c.GameVars.autoSendWave=e},e.improveTurret=function(t){if(e.engine.improveTurret(t).success){var n={type:r.GameConstants.ACTION_TYPE_LEVEL_UP_TURRET,tick:e.engine.ticksCounter,id:t};e.addAction(n),l.BoardContainer.currentInstance.improveTurret(t)}},e.upgradeTower=function(t){if(e.engine.upgradeTurret(t).success){var n={type:r.GameConstants.ACTION_TYPE_UPGRADE_TURRET,tick:e.engine.ticksCounter,id:t};e.addAction(n),l.BoardContainer.currentInstance.upgradeTurret(t),c.GameVars.currentScene===i.BattleScene.currentInstance&&i.BattleScene.currentInstance.updateTurretMenu()}},e.setNextStrategy=function(t){if(e.engine.setNextStrategy(t).success){var n={type:r.GameConstants.ACTION_TYPE_CHANGE_STRATEGY_TURRET,tick:e.engine.ticksCounter,id:t};e.addAction(n)}},e.setFixedTarget=function(t){if(e.engine.setFixedTarget(t).success){var n={type:r.GameConstants.ACTION_TYPE_CHANGE_FIXED_TARGET_TURRET,tick:e.engine.ticksCounter,id:t};e.addAction(n)}},e.createRangeCircle=function(e,t,n,a){return l.BoardContainer.currentInstance.createRangeCircle(e,t,n,a)},e.hideRangeCircles=function(){l.BoardContainer.currentInstance.hideRangeCircles()},e.showTurretMenu=function(e){l.BoardContainer.currentInstance.showTurretMenu(e)},e.hideTurretMenu=function(){l.BoardContainer.currentInstance.hideTurretMenu()},e.addAction=function(e){c.GameVars.logsObject.actions.push(e)},e.onEnemySpawned=function(e,t){l.BoardContainer.currentInstance.addEnemy(e,t)},e.onEnemyReachedExit=function(t){l.BoardContainer.currentInstance.removeEnemy(t.id),e.engine.gameOver||(m.AudioManager.playSound("danger",!1,1,c.GameVars.dangerRate),c.GameVars.dangerRate=Math.max(c.GameVars.dangerRate-.0125,.75),i.BattleScene.currentInstance.showFxEnemyTraspass()),c.GameVars.currentScene===i.BattleScene.currentInstance?i.BattleScene.currentInstance.hud.updateLifes():o.LogScene.currentInstance.hud.updateLifes()},e.onBulletShot=function(e,t){l.BoardContainer.currentInstance.addBullet(e,t)},e.onGlueBulletShot=function(e,t){l.BoardContainer.currentInstance.addGlueBullet(e,t)},e.onLaserBeamShot=function(e,t){l.BoardContainer.currentInstance.addLaserBeam(e,t)},e.onMortarShot=function(e,t){l.BoardContainer.currentInstance.addMortar(e,t)},e.onGlueShot=function(e,t){l.BoardContainer.currentInstance.addGlue(e,t)},e.onMineShot=function(e,t){l.BoardContainer.currentInstance.addMine(e,t)},e.onGlueConsumed=function(e){l.BoardContainer.currentInstance.onGlueConsumed(e)},e.onEnemyHit=function(e,t,n,a){for(var r=0;r<e.length;r++)l.BoardContainer.currentInstance.onEnemyHit(e[r]);t&&l.BoardContainer.currentInstance.removeBullet(t),n&&l.BoardContainer.currentInstance.detonateMortar(n),a&&l.BoardContainer.currentInstance.detonateMine(a)},e.removeBullet=function(e){l.BoardContainer.currentInstance.removeBullet(e)},e.removeGlueBullet=function(e){l.BoardContainer.currentInstance.removeGlueBullet(e)},e.onEnemyGlueHit=function(e,t){for(var n=0;n<e.length;n++)l.BoardContainer.currentInstance.onEnemyGlueHit(e[n]);t&&l.BoardContainer.currentInstance.removeGlueBullet(t)},e.onEnemiesTeleported=function(e){for(var t=0;t<e.length;t++)l.BoardContainer.currentInstance.teleportEnemy(e[t].enemy,e[t].glueTurret)},e.onEnemyKilled=function(e){l.BoardContainer.currentInstance.onEnemyKilled(e)},e.onNoEnemiesOnStage=function(){e.engine.gameOver||l.BoardContainer.currentInstance.showRoundCompletedLayer()},e.onWaveOver=function(){c.GameVars.autoSendWave?i.BattleScene.currentInstance.gui.onClickNextWave():c.GameVars.waveOver=!0},e.activeNextWave=function(){c.GameVars.currentScene===i.BattleScene.currentInstance&&i.BattleScene.currentInstance.gui.activeNextWave()},e.onGameOver=function(){var t=c.GameVars.gameData.currentMapIndex;if(e.engine.score>c.GameVars.gameData.scores[t]&&(c.GameVars.gameData.scores[t]=e.engine.score),d.GameManager.writeGameData(),c.GameVars.showGameOverLayer&&l.BoardContainer.currentInstance.showGameOverLayer(),d.GameManager.events.emit("gameOver",c.GameVars.levelObject,c.GameVars.logsObject,e.engine.score,e.engine.round),u.GameConstants.DOWNLOAD&&c.GameVars.currentScene===i.BattleScene.currentInstance){var n=JSON.stringify(c.GameVars.logsObject),a=new Blob([n],{type:"text/plain;charset=utf-8"});h.saveAs(a,"log-"+t+".json")}},e}();t.BattleManager=f},385:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(29)),i=n(386),u=n(19),c=n(36),l=n(64),d=n(468),m=function(e){function t(){var n=e.call(this,"LogScene")||this;return t.currentInstance=n,n}return r(t,e),t.prototype.create=function(){u.GameVars.currentScene=this,this.cameras.main.setBackgroundColor(13421772),c.BattleManager.init(),this.boardContainer=new l.BoardContainer(this),this.add.existing(this.boardContainer),this.hud=new i.HUD(this),this.add.existing(this.hud),this.gui=new d.LogGUI(this),this.add.existing(this.gui)},t.prototype.update=function(e,t){for(;u.GameVars.logsObject.actions.length&&u.GameVars.logsObject.actions[0].tick===c.BattleManager.engine.ticksCounter;){var n=u.GameVars.logsObject.actions.shift();switch(n.type){case o.GameConstants.ACTION_TYPE_NEXT_WAVE:c.BattleManager.newWave();break;case o.GameConstants.ACTION_TYPE_ADD_TURRET:c.BattleManager.addTurretToScene(n.turretType,n.position);break;case o.GameConstants.ACTION_TYPE_SELL_TURRET:c.BattleManager.sellTurret(n.id);break;case o.GameConstants.ACTION_TYPE_UPGRADE_TURRET:c.BattleManager.upgradeTower(n.id);break;case o.GameConstants.ACTION_TYPE_LEVEL_UP_TURRET:c.BattleManager.improveTurret(n.id);break;case o.GameConstants.ACTION_TYPE_CHANGE_STRATEGY_TURRET:c.BattleManager.setNextStrategy(n.id);break;case o.GameConstants.ACTION_TYPE_CHANGE_FIXED_TARGET_TURRET:c.BattleManager.setFixedTarget(n.id)}}c.BattleManager.update(e,t),this.boardContainer.update(e,t),this.hud.update(e,t)},t}(Phaser.Scene);t.LogScene=m},386:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(36),o=n(23),i=n(19),u=function(e){function t(t){var n=e.call(this,t)||this;n.scaleY=i.GameVars.scaleY;var a=new Phaser.GameObjects.Graphics(n.scene);a.fillStyle(24),a.fillRect(0,0,o.GameConstants.GAME_WIDTH,122),n.add(a);var r=new Phaser.GameObjects.Container(n.scene);r.y=87,n.add(r);var u=new Phaser.GameObjects.Image(n.scene,6,7,"texture_atlas_1","coin_icon");u.setOrigin(0),u.setScale(.9),r.add(u),n.creditsLabel=new Phaser.GameObjects.Text(n.scene,35,5,i.GameVars.formatNumber(s.BattleManager.engine.credits),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#ffffff"}),r.add(n.creditsLabel),n.bonusLabel=new Phaser.GameObjects.Text(n.scene,200,5,"BONUS: "+i.GameVars.formatNumber(s.BattleManager.engine.bonus),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#ffffff"}),r.add(n.bonusLabel);var c=new Phaser.GameObjects.Image(n.scene,o.GameConstants.GAME_WIDTH/2+180,8,"texture_atlas_1","lives_icon");return c.setOrigin(1,0),c.setScale(.9),r.add(c),n.lifesLabel=new Phaser.GameObjects.Text(n.scene,o.GameConstants.GAME_WIDTH/2+184,5,s.BattleManager.engine.lifes.toString(),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#ffffff"}),r.add(n.lifesLabel),n.roundLabel=new Phaser.GameObjects.Text(n.scene,o.GameConstants.GAME_WIDTH-5,5,"Round "+i.GameVars.formatNumber(s.BattleManager.engine.round),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#ffffff"}),n.roundLabel.setOrigin(1,0),r.add(n.roundLabel),n.enemyIcon=new Phaser.GameObjects.Image(n.scene,n.roundLabel.x-n.roundLabel.width-2,5,"texture_atlas_1","enemy_icon"),n.enemyIcon.setOrigin(1,0),n.enemyIcon.setScale(.9),r.add(n.enemyIcon),o.GameConstants.DEVELOPMENT?(n.ticksLabel=new Phaser.GameObjects.Text(n.scene,o.GameConstants.GAME_WIDTH/2,o.GameConstants.GAME_HEIGHT/i.GameVars.scaleY-5,"ticks: "+s.BattleManager.engine.ticksCounter,{fontFamily:"Rubik-Regular",fontSize:"25px",color:"#FFFFFF"}),n.ticksLabel.setOrigin(.5,1),n.add(n.ticksLabel),n.fpsLabel=new Phaser.GameObjects.Text(n.scene,15,(o.GameConstants.GAME_HEIGHT-30)/i.GameVars.scaleY,"",{fontFamily:"Rubik-Regular",fontSize:"22px",color:"#FF0000"}),n.add(n.fpsLabel)):(n.ticksLabel=null,n.fpsLabel=null),n}return r(t,e),t.prototype.update=function(e,t){this.creditsLabel.text=i.GameVars.formatNumber(s.BattleManager.engine.credits),this.bonusLabel.text="BONUS: "+i.GameVars.formatNumber(s.BattleManager.engine.bonus),this.ticksLabel&&!s.BattleManager.engine.gameOver&&(this.ticksLabel.text="ticks: "+s.BattleManager.engine.ticksCounter),o.GameConstants.DEVELOPMENT&&(this.fpsLabel.text=Math.round(this.scene.game.loop.actualFps).toString())},t.prototype.updateLifes=function(){this.lifesLabel.setText(s.BattleManager.engine.lifes<0?"0":s.BattleManager.engine.lifes.toString())},t.prototype.updateRound=function(){this.roundLabel.setText("Round "+s.BattleManager.engine.round),this.enemyIcon.x=this.roundLabel.x-this.roundLabel.width-2},t}(Phaser.GameObjects.Container);t.HUD=u},387:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(166)),i=function(e){function t(n,a,r){var s=e.call(this,n)||this;s.enabled=!0,s.setSize(t.WIDTH,t.HEIGHT),s.setInteractive(new o.default.Geom.Rectangle(0,0,t.WIDTH,t.HEIGHT),o.default.Geom.Rectangle.Contains),s.on("pointerover",function(){s.enabled&&1===s.alpha&&s.setScale(1.025)}),s.on("pointerout",function(){s.enabled&&1===s.alpha&&s.setScale(1)}),s.on("pointerdown",function(){s.enabled&&r(s)});var i=new o.default.GameObjects.Image(s.scene,0,0,"texture_atlas_1","btn_rectangle");return s.add(i),s.text=new o.default.GameObjects.Text(s.scene,0,0,a,{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#00B4FF"}),s.text.setOrigin(.5),s.add(s.text),s}return r(t,e),t.prototype.setLabel=function(e){this.text.setText(e)},t.prototype.setEnabled=function(e){this.enabled=e},t.HEIGHT=58,t.WIDTH=360,t}(o.default.GameObjects.Container);t.MenuButton=i},388:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(166)),i=function(e){function t(n,a){var r=e.call(this,n)||this;r.setSize(t.WIDTH,t.HEIGHT);var s=new o.default.GameObjects.Image(r.scene,0,0,"texture_atlas_1","title_area");r.add(s);var i=new o.default.GameObjects.Text(r.scene,0,0,a,{fontFamily:"Rubik-Regular",fontSize:"35px",color:"#FFFFFF"});return i.setSize(t.WIDTH,t.HEIGHT),i.setAlign("center"),i.setOrigin(.5,.5),r.add(i),r}return r(t,e),t.WIDTH=360,t.HEIGHT=70,t}(o.default.GameObjects.Container);t.MenuTitle=i},389:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n(19),u=n(473),c=s(n(29)),l=function(e){function t(t,n,a){var r=e.call(this,t)||this;return r.enemy=n,r.id=r.enemy.id,r.type=r.enemy.type,r.alpha=0,r.x=o.GameConstants.CELLS_SIZE*(a.c+.5),r.y=o.GameConstants.CELLS_SIZE*(a.r+.5),r.img=r.scene.add.sprite(0,0,"texture_atlas_1"),r.add(r.img),r.shield=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","enemy_shield"),r.shield.visible=!1,r.add(r.shield),r.lifeBar=new u.LifeBar(r.scene,r.enemy.life),r.lifeBar.y=-32,r.lifeBar.x-=u.LifeBar.WIDTH/2,r.add(r.lifeBar),r.img.anims.play("enemy_"+r.type+"_run"),r}return r(t,e),t.prototype.update=function(e,t){if(0!==this.enemy.life){if(this.enemy.teleporting)return this.scaleX=.175,void(this.scaleY=.175);var n;this.enemy.affectedByGlue||this.enemy.affectedByGlueBullet?this.img.anims.currentAnim.key==="enemy_"+this.type+"_run"&&this.img.anims.play("enemy_"+this.type+"_run_frozen"):this.img.anims.currentAnim.key==="enemy_"+this.type+"_run_frozen"&&this.img.anims.play("enemy_"+this.type+"_run"),this.enemy.hasBeenTeleported?this.shield.visible||(this.shield.visible=!0):this.shield.visible&&(this.shield.visible=!1),this.scaleX=1,this.scaleY=1,n=o.GameConstants.INTERPOLATE_TRAJECTORIES?1===i.GameVars.timeStepFactor?.15:.5:1,this.x+=(this.enemy.x*o.GameConstants.CELLS_SIZE-this.x)*n,this.y+=(this.enemy.y*o.GameConstants.CELLS_SIZE-this.y)*n,this.lifeBar.updateValue(this.enemy.life),this.alpha<1&&(this.alpha+=1===i.GameVars.timeStepFactor?.035:.1)}},t.prototype.hit=function(){this.lifeBar.visible=!0},t.prototype.glueHit=function(){},t.prototype.teleport=function(e){var t=(e.position.c+.5)*o.GameConstants.CELLS_SIZE,n=(e.position.r+.5)*o.GameConstants.CELLS_SIZE-8;this.scene.tweens.add({targets:this,x:t,y:n,scaleX:.175,scaleY:.175,ease:Phaser.Math.Easing.Cubic.Out,duration:500})},t.prototype.die=function(){this.lifeBar.visible=!1;var e=this.type===c.GameConstants.ENEMY_FLIER||this.type===c.GameConstants.ENEMY_RUNNER?3:1.5,t=e*(this.enemy.x-this.enemy.prevX)*o.GameConstants.CELLS_SIZE,n=e*(this.enemy.y-this.enemy.prevY)*o.GameConstants.CELLS_SIZE;this.scene.tweens.add({targets:this,x:this.x+t,y:this.y+n,ease:Phaser.Math.Easing.Cubic.Out,duration:600}),this.scene.tweens.add({targets:this,scaleX:1.25,scaleY:1.25,alpha:0,ease:Phaser.Math.Easing.Cubic.In,duration:600,onComplete:function(){this.destroy()},onCompleteScope:this})},t}(Phaser.GameObjects.Container);t.EnemyActor=l},411:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=a(n(17)),o=n(415);s.default.render(r.default.createElement(o.App,null),document.getElementById("content"))},415:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),u=o(n(104)),c=n(24),l=n(54),d=n(428),m=n(446),h=n(447),f=n(451),p=n(452),_=o(n(463));n(494);var y={"/":function(){return i.default.createElement(p.ContestGame,{id:"binance-ieo-1"})},"/map/:map":function(e){var t=e.map;return i.default.createElement(f.SimpleGame,{map:t})},"/contest/:id":function(e){var t=e.id;return i.default.createElement(p.ContestGame,{id:t})},"/tournaments/:id":function(e){var t=e.id;return i.default.createElement(d.TournamentContainer,{id:t})},"/tournaments/:tournamentId/scores/:id":function(e){var t=e.tournamentId,n=e.id;return i.default.createElement(m.TournamentReplay,{tournamentId:t,id:n})},"/replay":function(){return i.default.createElement(h.Replay,null)}},g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.render=function(){return i.default.createElement(l.A,s({},this.props))},t}(i.default.Component);t.AWrapper=g,t.App=function(){var e=c.createMuiTheme({palette:{type:"dark",primary:{light:"#534bae",main:"#1a237e",dark:"#000051",contrastText:"#ffffff"},secondary:{main:"#ff00dc",contrastText:"#ffffff"},background:{default:"#000000",paper:"#000018"}},overrides:{MuiPaper:{root:{backgroundColor:"rgba(0,0,0,0.85)"},outlined:{borderColor:"#0069c0"}},MuiStepConnector:{lineVertical:{minHeight:"12px"}},MuiExpansionPanel:{root:{backgroundColor:"rgba(0,0,0,0)"}},MuiButton:{root:{backgroundColor:"rgba(0,0,255,0.1)",color:"#2196f3",borderRadius:"0px",transition:"transform .2s"},label:{marginLeft:"40px",marginRight:"40px",fontSize:"large"},outlined:{borderColor:"#2196f3","&:hover":{transform:"scale(1.05)",border:"1px solid"}}},MuiFormLabel:{root:{"&focused":{color:"#2196f3"}}}}}),t=l.useRoutes(y),n=t.type===d.TournamentContainer||t.type===m.TournamentReplay||t.type===h.Replay||t.type===f.SimpleGame||t.type===p.ContestGame;return i.default.createElement(c.ThemeProvider,{theme:e},i.default.createElement(u.default,null),i.default.createElement("div",null,i.default.createElement("div",{className:"menu-container"},t),i.default.createElement(_.default,{visible:n})))}},428:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(35),o=n(54),i=n(72),u=n(107),c=n(255),l=n(256);t.TournamentContainer=function(e){var t=e.id,n=["original","waiting_line","turn_round","hurry","civyshk_yard","civyshk_2y","civyshk_line5","civyshk_labyrinth"],a=r.useState(!1),d=a[0],m=a[1],h=r.useState(null),f=h[0],p=h[1],_=c.useTournamentService(t);r.useEffect(function(){if("loaded"===_.status){var e=_.payload.map;s.GameManager.mapSelected(n.indexOf(e)),m(!0)}},[_.status]);var y=function(e,n,a,r){l.putScore(t,{score:a,waves:r,log:n}).then(function(e){p(e.ok||409==e.status?null:e.statusText)}).catch(function(e){p(e.message)})},g=function(){o.navigate("/")};return r.useEffect(function(){return s.GameManager.events.on("gameOver",y),s.GameManager.events.on("exit",g),function(){s.GameManager.events.removeListener("gameOver",y),s.GameManager.events.removeListener("exit",g)}},[]),r.default.createElement("div",null,!d&&r.default.createElement(i.Loading,null),f&&r.default.createElement(u.FullScreenMessage,{title:"Error submitting score",message:f,buttonTitle:"Exit",onClick:function(){return o.navigate("/")}}))}},429:function(e,t,n){var a={"./civyshk_2y.json":430,"./civyshk_labyrinth.json":431,"./civyshk_line5.json":432,"./civyshk_yard.json":433,"./hurry.json":434,"./original.json":435,"./turn_round.json":436,"./waiting_line.json":437};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=429},446:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(72),o=n(107),i=n(256),u=n(54),c=n(35),l=n(76);t.TournamentReplay=function(e){var t=e.tournamentId,n=e.id,a=i.useScoreService(t,n);return r.useEffect(function(){if("loaded"==a.status){var e=a.payload[0].map,t=l.loadMap(e),n=l.loadLevel(t),r=a.payload[1].log;c.GameManager.enterLogScene(r,n)}},[a.status]),r.useEffect(function(){var e=function(){return u.navigate("/")};return c.GameManager.events.on("exit",e),function(){return c.GameManager.events.removeListener("exit",e)}},[]),r.default.createElement("div",null,"loading"==a.status&&r.default.createElement(s.Loading,{progress:a.progress}),"error"==a.status&&r.default.createElement(o.FullScreenMessage,{title:"Error Loading Log",message:a.error.message,buttonTitle:"Exit",onClick:function(){return u.navigate("/")}}))}},447:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(0)),o=n(448),i=n(450),u=n(54);t.Replay=function(){var e=u.useQueryParams()[0];return e.log?s.default.createElement(i.RemoteReplay,a({},e)):s.default.createElement(o.LocalReplay,null)}},448:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(72),o=n(107),i=n(54),u=n(35),c=n(76),l=n(93),d=n(24),m=n(449),h=d.makeStyles(function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}});t.LocalReplay=function(){var e=r.useState(!1),t=e[0],n=e[1],a=r.useState(void 0),d=a[0],f=a[1],p=r.useState(!1),_=p[0],y=p[1],g=h(),v=r.useState(""),b=v[0],G=v[1];r.useEffect(function(){var e=function(){return i.navigate("/")};return u.GameManager.events.on("exit",e),function(){return u.GameManager.events.removeListener("exit",e)}},[]);return r.default.createElement("div",{style:{height:"100vh",width:"100vw",position:"absolute",zIndex:1}},t&&r.default.createElement(s.Loading,null),d&&r.default.createElement(o.FullScreenMessage,{title:"Error Loading Log",message:d.message,buttonTitle:"Exit",onClick:function(){return i.navigate("/")}}),r.default.createElement(l.Backdrop,{open:!_},r.default.createElement(l.Paper,null,r.default.createElement("form",null,r.default.createElement(l.FormControl,{className:g.formControl},r.default.createElement(l.InputLabel,{id:"map-select-label"},"Map"),r.default.createElement(l.Select,{labelId:"map-select-label",id:"map-select",value:b,className:g.selectEmpty,onChange:function(e){return G(e.target.value.toString())}},["original","waiting_line","turn_round","hurry","civyshk_yard","civyshk_2y","civyshk_line5","civyshk_labyrinth"].map(function(e){return r.default.createElement(l.MenuItem,{key:e,value:e},r.default.createElement(m.MapThumbnail,{map:e,width:50,height:60}),r.default.createElement("span",null,e))})),r.default.createElement(l.FormHelperText,{id:"map-helper-text"},"Name of the map associated with log file.")),r.default.createElement(l.FormControl,{fullWidth:!0},r.default.createElement(l.InputLabel,{id:"file-label",htmlFor:"file"},"Log File"),r.default.createElement(l.Input,{id:"file",type:"file","aria-describedby":"file-helper-text",required:!0,placeholder:"JSON Log File",name:"file",disabled:""===b,onChange:function(e){return function(e){try{f(void 0),n(!0);var t=new FileReader;t.onloadend=function(e){var a=t.result;try{var r=JSON.parse(a.toString()),s=c.loadMap(b),o=c.loadLevel(s);n(!1),f(void 0),y(!0),u.GameManager.enterLogScene(r,o)}catch(e){n(!1),f(e)}},t.readAsText(e)}catch(e){n(!1),f(e)}}(e.target.files[0])}}),r.default.createElement(l.FormHelperText,{id:"file-helper-text"},"JSON Log File to load."))))))}},449:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(76);t.MapThumbnail=function(e){var t=s.loadMap(e.map)||{name:"Empty",size:{r:15,c:10},path:[],plateaus:[]},n=e.width/t.size.c,a=e.height/t.size.r,o=function(e){return function(s,o){var i=s.c,u=s.r;return i<0||u<0||i>=t.size.c||u>=t.size.r?r.default.createElement("div",{key:o}):r.default.createElement("rect",{x:i*n,y:u*a,width:n,height:a,fill:e,key:o})}},i=Array.from(t.path,o("#000018")),u=Array.from(t.plateaus,o("#008abe")),c=t.size.c/12,l=t.size.r/15,d=(12-t.size.c)/2*n,m=(15-t.size.r)/2*a;return r.default.createElement("svg",{version:"1.1",baseProfile:"full",className:"ui right floated",width:e.width,height:e.height,xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("rect",{width:"100%",height:"100%",fill:"#002959"}),r.default.createElement("g",{transform:"scale("+c+", "+l+")"},r.default.createElement("g",{transform:"translate("+d+", "+m+")"},r.default.createElement("rect",{width:"100%",height:"100%",fill:t.plateaus.length>0?"#002959":"#008abe",key:"-1"}),i,u)),r.default.createElement("rect",{width:"100%",height:"100%",stroke:"black",fillOpacity:0}))}},450:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(72),o=n(107),i=n(54),u=n(35),c=n(76),l=n(54);t.RemoteReplay=function(){var e=l.useQueryParams()[0],t=e.log,n=e.map,a=r.useState(!1),d=a[0],m=a[1],h=r.useState(void 0),f=h[0],p=h[1],_=function(){p(void 0),m(!0),fetch(t).then(function(e){return e.json()}).then(function(e){try{if(!n)throw new Error("Undefined map");var t=c.loadMap(n),a=c.loadLevel(t);m(!1),p(void 0),u.GameManager.enterLogScene(e,a)}catch(e){m(!1),p(e)}}).catch(function(e){}).finally(function(){return u.GameManager.events.removeListener("ready",_)})};return r.useEffect(function(){var e=function(){return i.navigate("/")};return u.GameManager.events.on("ready",_),u.GameManager.events.on("exit",e),function(){u.GameManager.events.removeListener("exit",e)}},[]),r.default.createElement("div",{style:{height:"100vh",width:"100vw",position:"absolute",zIndex:1}},d&&r.default.createElement(s.Loading,null),f&&r.default.createElement(o.FullScreenMessage,{title:"Error Loading Log",message:f.message,buttonTitle:"Exit",onClick:function(){return i.navigate("/")}}))}},451:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(54),o=n(72),i=n(35);t.SimpleGame=function(e){var t=e.map,n=["original","waiting_line","turn_round","hurry","civyshk_yard","civyshk_2y","civyshk_line5","civyshk_labyrinth"],a=r.useState(!1),u=a[0],c=a[1];return r.useEffect(function(){var e=function(){return c(!0)},t=function(){return s.navigate("/")};return i.GameManager.events.on("ready",e),i.GameManager.events.on("exit",t),function(){i.GameManager.events.removeListener("ready",e),i.GameManager.events.removeListener("exit",t)}},[]),r.useEffect(function(){u&&i.GameManager.mapSelected(n.indexOf(t))},[u]),r.default.createElement("div",{style:{height:"100vh",width:"100vw",position:"static",zIndex:1,visibility:u?"hidden":"visible"}},!u&&r.default.createElement(o.Loading,null))}},452:function(e,t,n){"use strict";var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(0)),o=n(93),i=n(390),u=n(86),c=n(453),l=n(54),d=r(n(7)),m=n(455),h=n(72),f=n(456),p=n(462),_=n(35),y=n(19);t.ContestGame=function(e){var t=e.id,n=["original","waiting_line","turn_round","hurry","civyshk_yard","civyshk_2y","civyshk_line5","civyshk_labyrinth"],a=s.useState(!1),r=a[0],g=a[1],v=s.useState(!1),b=v[0],G=v[1],E=s.useState(!1),O=E[0],S=E[1],T=s.useState(""),C=T[0],x=T[1],M=m.useContestService(t),P=s.useState(!1),w=P[0],j=P[1],I=s.useState(void 0),B=I[0],A=I[1],L=function(e,t,n,a){A({score:n,waves:a,log:t})},R=function(){r&&(S(!1),x(""),A(void 0),_.GameManager.reset())};s.useEffect(function(){var e=function(){return g(!0)},t=function(){return l.navigate("/")};return y.GameVars.showGameOverLayer=!1,_.GameManager.events.on("ready",e),_.GameManager.events.on("exit",t),_.GameManager.events.on("gameOver",L),function(){y.GameVars.showGameOverLayer=!0,_.GameManager.events.removeListener("ready",e),_.GameManager.events.removeListener("exit",t),_.GameManager.events.removeListener("gameOver",L)}},[]),s.useEffect(function(){if("loaded"===M.status&&r){var e=M.payload.map;_.GameManager.mapSelected(n.indexOf(e)),j(!0),M.payload.startDate&&G(d.default.utc(M.payload.startDate).isAfter(d.default.utc()))}else"error"===M.status&&j(!0)},[M.status,r]);var F;return s.default.createElement("div",{style:{height:"100vh",width:"100vw",position:B||b?"absolute":"static",zIndex:1}},!w&&s.default.createElement(h.Loading,null),s.default.createElement(o.Backdrop,{open:!!B||b},"loaded"===M.status&&b&&s.default.createElement(p.Layover,null,s.default.createElement(o.Grid,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:4},s.default.createElement(o.Grid,{item:!0},M.payload.logo&&s.default.createElement("img",{height:"60px",src:M.payload.logo})),s.default.createElement(o.Grid,{item:!0,container:!0,direction:"row",spacing:4,alignItems:"center",justify:"center"},s.default.createElement(f.Countdown,{date:d.default.utc(M.payload.startDate).toDate()})))),"loaded"===M.status&&B&&s.default.createElement(p.Layover,null,!!B&&s.default.createElement(u.Formik,{initialValues:{contestantId:""},validate:(F="^\\d{8}$",function(e){return e.contestantId?F&&!new RegExp(F).test(e.contestantId)?{contestantId:"Invalid Binance Referral ID"}:{}:{contestantId:"Required"}}),onSubmit:function(e,t){var n=t.setSubmitting;"loaded"===M.status&&(S(!1),x(""),m.submitContestEntry(M.payload.id,e.contestantId,B.score,B.waves,B.log).then(function(e){e.ok?(S(!0),n(!1),x("")):(S(!1),n(!1),x(e.statusText))}).catch(function(e){S(!1),n(!1),x(e.message)}))}},function(e){var t=e.submitForm,n=e.isSubmitting,a=e.errors;return s.default.createElement(u.Form,{translate:""},s.default.createElement(o.Grid,{container:!0,direction:"column",justify:"flex-start",alignItems:"center",spacing:1},s.default.createElement(o.Grid,{item:!0},s.default.createElement(p.LayoverTitle,null,"Game Over")),s.default.createElement(o.Grid,{item:!0},s.default.createElement(p.LayoverHeading,null,"SCORE: ",B.score.toLocaleString())),s.default.createElement(o.Grid,{item:!0},M.payload.logo&&s.default.createElement("img",{height:"60px",src:M.payload.logo})),s.default.createElement(o.Grid,{item:!0},s.default.createElement(o.LinearProgress,{color:"secondary",style:{width:"100vw",visibility:n?"visible":"hidden"}})),O&&s.default.createElement(o.Grid,{item:!0},s.default.createElement(i.Alert,{severity:"success",variant:"outlined"},"Score submitted!")),C&&s.default.createElement(o.Grid,{item:!0},s.default.createElement(i.Alert,{severity:"error",variant:"outlined"},C)),!O&&s.default.createElement(o.Grid,{item:!0,container:!0,justify:"center",alignItems:"flex-start",spacing:2},s.default.createElement(o.Grid,{item:!0},s.default.createElement(u.Field,{component:c.TextField,name:"contestantId",required:!0,disabled:n,label:M.payload.contestantLabel,variant:"filled",size:"small",helperText:s.default.createElement("span",null,"Get your Binance Referral ID ",s.default.createElement("a",{style:{color:"#fff"},href:"https://www.binance.com/en/activity/referral",target:"_blank"},"here"))})),s.default.createElement(o.Grid,{item:!0},s.default.createElement(o.Button,{variant:"outlined",onClick:t,disabled:n||void 0!==a.contestantId},"Submit"))),s.default.createElement(o.Grid,{item:!0},s.default.createElement(o.Button,{variant:"outlined",color:"secondary",onClick:R},"Play Again"))))}))))}},454:function(e,t,n){var a={"./af":257,"./af.js":257,"./ar":258,"./ar-dz":259,"./ar-dz.js":259,"./ar-kw":260,"./ar-kw.js":260,"./ar-ly":261,"./ar-ly.js":261,"./ar-ma":262,"./ar-ma.js":262,"./ar-sa":263,"./ar-sa.js":263,"./ar-tn":264,"./ar-tn.js":264,"./ar.js":258,"./az":265,"./az.js":265,"./be":266,"./be.js":266,"./bg":267,"./bg.js":267,"./bm":268,"./bm.js":268,"./bn":269,"./bn.js":269,"./bo":270,"./bo.js":270,"./br":271,"./br.js":271,"./bs":272,"./bs.js":272,"./ca":273,"./ca.js":273,"./cs":274,"./cs.js":274,"./cv":275,"./cv.js":275,"./cy":276,"./cy.js":276,"./da":277,"./da.js":277,"./de":278,"./de-at":279,"./de-at.js":279,"./de-ch":280,"./de-ch.js":280,"./de.js":278,"./dv":281,"./dv.js":281,"./el":282,"./el.js":282,"./en-SG":283,"./en-SG.js":283,"./en-au":284,"./en-au.js":284,"./en-ca":285,"./en-ca.js":285,"./en-gb":286,"./en-gb.js":286,"./en-ie":287,"./en-ie.js":287,"./en-il":288,"./en-il.js":288,"./en-nz":289,"./en-nz.js":289,"./eo":290,"./eo.js":290,"./es":291,"./es-do":292,"./es-do.js":292,"./es-us":293,"./es-us.js":293,"./es.js":291,"./et":294,"./et.js":294,"./eu":295,"./eu.js":295,"./fa":296,"./fa.js":296,"./fi":297,"./fi.js":297,"./fo":298,"./fo.js":298,"./fr":299,"./fr-ca":300,"./fr-ca.js":300,"./fr-ch":301,"./fr-ch.js":301,"./fr.js":299,"./fy":302,"./fy.js":302,"./ga":303,"./ga.js":303,"./gd":304,"./gd.js":304,"./gl":305,"./gl.js":305,"./gom-latn":306,"./gom-latn.js":306,"./gu":307,"./gu.js":307,"./he":308,"./he.js":308,"./hi":309,"./hi.js":309,"./hr":310,"./hr.js":310,"./hu":311,"./hu.js":311,"./hy-am":312,"./hy-am.js":312,"./id":313,"./id.js":313,"./is":314,"./is.js":314,"./it":315,"./it-ch":316,"./it-ch.js":316,"./it.js":315,"./ja":317,"./ja.js":317,"./jv":318,"./jv.js":318,"./ka":319,"./ka.js":319,"./kk":320,"./kk.js":320,"./km":321,"./km.js":321,"./kn":322,"./kn.js":322,"./ko":323,"./ko.js":323,"./ku":324,"./ku.js":324,"./ky":325,"./ky.js":325,"./lb":326,"./lb.js":326,"./lo":327,"./lo.js":327,"./lt":328,"./lt.js":328,"./lv":329,"./lv.js":329,"./me":330,"./me.js":330,"./mi":331,"./mi.js":331,"./mk":332,"./mk.js":332,"./ml":333,"./ml.js":333,"./mn":334,"./mn.js":334,"./mr":335,"./mr.js":335,"./ms":336,"./ms-my":337,"./ms-my.js":337,"./ms.js":336,"./mt":338,"./mt.js":338,"./my":339,"./my.js":339,"./nb":340,"./nb.js":340,"./ne":341,"./ne.js":341,"./nl":342,"./nl-be":343,"./nl-be.js":343,"./nl.js":342,"./nn":344,"./nn.js":344,"./pa-in":345,"./pa-in.js":345,"./pl":346,"./pl.js":346,"./pt":347,"./pt-br":348,"./pt-br.js":348,"./pt.js":347,"./ro":349,"./ro.js":349,"./ru":350,"./ru.js":350,"./sd":351,"./sd.js":351,"./se":352,"./se.js":352,"./si":353,"./si.js":353,"./sk":354,"./sk.js":354,"./sl":355,"./sl.js":355,"./sq":356,"./sq.js":356,"./sr":357,"./sr-cyrl":358,"./sr-cyrl.js":358,"./sr.js":357,"./ss":359,"./ss.js":359,"./sv":360,"./sv.js":360,"./sw":361,"./sw.js":361,"./ta":362,"./ta.js":362,"./te":363,"./te.js":363,"./tet":364,"./tet.js":364,"./tg":365,"./tg.js":365,"./th":366,"./th.js":366,"./tl-ph":367,"./tl-ph.js":367,"./tlh":368,"./tlh.js":368,"./tr":369,"./tr.js":369,"./tzl":370,"./tzl.js":370,"./tzm":371,"./tzm-latn":372,"./tzm-latn.js":372,"./tzm.js":371,"./ug-cn":373,"./ug-cn.js":373,"./uk":374,"./uk.js":374,"./ur":375,"./ur.js":375,"./uz":376,"./uz-latn":377,"./uz-latn.js":377,"./uz.js":376,"./vi":378,"./vi.js":378,"./x-pseudo":379,"./x-pseudo.js":379,"./yo":380,"./yo.js":380,"./zh-cn":381,"./zh-cn.js":381,"./zh-hk":382,"./zh-hk.js":382,"./zh-tw":383,"./zh-tw.js":383};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=454},455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n(162),s=n(163);t.getContest=function(e){var t=s.contestUrl+"/"+e;return r.get(t)},t.submitContestEntry=function(e,t,n,a,o){var i=s.contestUrl+"/"+e+"/"+t;return r.post(i,{score:n,waves:a,log:o})},t.useContestService=function(e){var n=a.useState({status:"loading"}),r=n[0],s=n[1];return a.useEffect(function(){t.getContest(e).then(function(e){return s({status:"loaded",payload:e.parsedBody})}).catch(function(e){return s({status:"error",error:e})})},[e]),r}},456:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=a(n(457)),o=n(93),i=n(24).makeStyles(function(e){return{countdown:{textAlign:"center"}}});t.Countdown=function(e){var t=e.date,n=i(),a=function(e){return e.toString().padStart(2,"0")};return r.default.createElement(s.default,{initialTime:t.getTime()-(new Date).getTime(),direction:"backward",lastUnit:"h"},function(){return r.default.createElement(r.default.Fragment,null,r.default.createElement(o.Grid,{item:!0},r.default.createElement("div",null,r.default.createElement(o.Typography,{variant:"h2",className:n.countdown},r.default.createElement(s.default.Hours,{formatValue:a}))),r.default.createElement("div",null,r.default.createElement(o.Typography,{variant:"h6",className:n.countdown},"hours"))),r.default.createElement(o.Grid,{item:!0},r.default.createElement("div",null,r.default.createElement(o.Typography,{variant:"h2",className:n.countdown},r.default.createElement(s.default.Minutes,{formatValue:a}))),r.default.createElement("div",null,r.default.createElement(o.Typography,{variant:"h6",className:n.countdown},"minutes"))),r.default.createElement(o.Grid,{item:!0},r.default.createElement("div",null,r.default.createElement(o.Typography,{variant:"h2",className:n.countdown},r.default.createElement(s.default.Seconds,{formatValue:a}))),r.default.createElement("div",null,r.default.createElement(o.Typography,{variant:"h6",className:n.countdown},"seconds"))))})}},462:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=n(24).makeStyles(function(e){return{layover:{backgroundColor:"rgba(0,0,90,0.7)",width:"100vw",padding:e.spacing(3)},layoverTitle:{paddingLeft:e.spacing(8),paddingRight:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3),textTransform:"uppercase",fontFamily:"Rubik-Regular",fontSize:"30px",backgroundImage:"radial-gradient(rgba(0,0,255,0), rgba(0,0,255,0.6))"},h1:{fontSize:"65px",fontFamily:"Rubik-Regular"}}});t.LayoverTitle=function(e){var t=s();return r.default.createElement("p",{style:{textAlign:"center"}},r.default.createElement("span",{className:t.layoverTitle},e.children))},t.LayoverHeading=function(e){var t=s();return r.default.createElement("p",{style:{textAlign:"center"}},r.default.createElement("span",{className:t.h1},e.children))},t.Layover=function(e){var t=s();return r.default.createElement("div",{className:t.layover},e.children)}},463:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(0)),i=s(n(166)),u=n(464),c=n(23),l=n(465),d=n(466),m=n(109),h=n(492),f=n(385),p=function(e){function t(t){var n=e.call(this,t)||this;return n.resize=function(){n.setState({height:window.innerHeight})},n.state={height:0},n}return r(t,e),t.prototype.componentDidMount=function(){this.createGame(),this.resize(),window.addEventListener("resize",this.resize)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.resize)},t.prototype.createGame=function(){var e={version:c.GameConstants.VERSION,type:i.default.CANVAS,backgroundColor:"#000000",parent:"phaser-game",width:c.GameConstants.GAME_WIDTH,height:c.GameConstants.GAME_HEIGHT,scale:{mode:i.default.Scale.FIT,autoCenter:i.default.Scale.CENTER_HORIZONTALLY},scene:[l.BootScene,d.PreloadScene,f.LogScene,m.BattleScene,h.MapsScene]};new u.Game(e)},t.prototype.render=function(){var e=this.props.visible?"visible":"hidden";return o.default.createElement("div",{id:"phaser-game",style:{position:"absolute",left:0,top:0,visibility:e,width:"100vw",height:this.state.height+"px"}})},t}(o.default.Component);t.default=p},464:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(32),o=n(19),i=function(e){function t(n){var a=e.call(this,n)||this;return t.currentInstance=a,a.onBlur=function(){s.AudioManager.sound&&s.AudioManager.sound.mute(!0),s.AudioManager.music&&s.AudioManager.music.mute(!0)},a.onFocus=function(){s.AudioManager.sound&&s.AudioManager.sound.mute(o.GameVars.gameData.soundMuted),s.AudioManager.music&&s.AudioManager.music.mute(o.GameVars.gameData.musicMuted)},a}return r(t,e),t}(Phaser.Game);t.Game=i},465:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),o=function(e){function t(){return e.call(this,"BootScene")||this}return r(t,e),t.prototype.create=function(){this.add.text(-100,-100,"abcdefg",{fontFamily:"Rubik-Light",fontSize:28,color:"#A6F834"}),this.add.text(-100,-100,"abcdefg",{fontFamily:"Rubik-Regular",fontSize:28,color:"#A6F834"}),t.currentInstance=this,s.GameManager.setCurrentScene(this),this.scene.setVisible(!1),s.GameManager.init()},t}(Phaser.Scene);t.BootScene=o},466:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),o=n(32),i=n(23),u=n(19),c=function(e){function t(){var n=e.call(this,"PreloadScene")||this;return t.currentInstance=n,n}return r(t,e),t.prototype.preload=function(){this.cameras.main.setBackgroundColor(24),this.composeScene(),this.loadAssets()},t.prototype.create=function(){this.loadHowl()},t.prototype.composeScene=function(){var e=this.add.text(5,i.GameConstants.GAME_HEIGHT-15,"LOADING...",{fontFamily:"Arial",fontSize:"40px",color:"#FFFFFF"});e.setOrigin(0,1),e.scaleY=u.GameVars.scaleY,this.progressBar=this.add.graphics(),this.progressBar.fillStyle(16777215),this.progressBar.fillRect(0,i.GameConstants.GAME_HEIGHT-10,i.GameConstants.GAME_WIDTH,10),this.progressBar.scaleX=0},t.prototype.loadAssets=function(){this.load.atlas("texture_atlas_1","/assets/texture_atlas_1.png","/assets/texture_atlas_1.json"),this.load.json("sound","/assets/audio/sound.json"),this.load.json("music","/assets/audio/music.json"),this.load.on("progress",this.updateLoadedPercentage,this)},t.prototype.updateLoadedPercentage=function(e){this.progressBar.scaleX<e&&(this.progressBar.scaleX=e)},t.prototype.loadHowl=function(){var e=this.cache.json.get("music");e=JSON.parse(JSON.stringify(e).replace("urls","src")),o.AudioManager.music=new Howl(e),o.AudioManager.music.on("load",function(){var e=t.currentInstance.cache.json.get("sound");e=JSON.parse(JSON.stringify(e).replace("urls","src")),o.AudioManager.sound=new Howl(e),o.AudioManager.sound.on("load",function(){s.GameManager.setCurrentScene(t.currentInstance),t.currentInstance.scene.setVisible(!1),s.GameManager.onGameAssetsLoaded()})})},t}(Phaser.Scene);t.PreloadScene=c},467:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),o=n(36),i=n(23),u=n(19),c=n(109),l=n(387),d=n(388),m=function(e){function t(t){var n=e.call(this,t)||this,a=new Phaser.GameObjects.Container(n.scene);a.setPosition(0,-i.GameConstants.GAME_HEIGHT/4);var r=new Phaser.GameObjects.Graphics(n.scene);a.add(r);var m=30,h=new d.MenuTitle(n.scene,"GAME OVER");h.setPosition(0,m+h.height/2),a.add(h),m+=h.height+20;var f=new Phaser.GameObjects.Text(n.scene,0,m+40,"SCORE: "+u.GameVars.formatNumber(o.BattleManager.engine.score),{fontFamily:"Rubik-Regular",fontSize:"65px",color:"#FFFFFF"});f.setOrigin(.5),a.add(f),m+=80;var p=new l.MenuButton(n.scene,"RESTART",function(){return s.GameManager.reset()});if(p.setPosition(0,m+p.height/2),a.add(p),m+=p.height+10,!i.GameConstants.GAME_ONLY){var _=new l.MenuButton(n.scene,"EXIT",function(){return s.GameManager.events.emit("exit")});_.setPosition(0,m+_.height/2),a.add(_),m+=_.height+15}return n.scene.tweens.add({targets:n,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500}),u.GameVars.currentScene!==c.BattleScene.currentInstance&&p.setEnabled(!1),a.setSize(i.GameConstants.GAME_WIDTH,m),r.fillStyle(720958),r.fillRect(-i.GameConstants.GAME_WIDTH/2,0,i.GameConstants.GAME_WIDTH,m),r.alpha=.75,n.add(a),n}return r(t,e),t}(Phaser.GameObjects.Container);t.GameOverLayer=m},468:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(35),o=n(19),i=n(36),u=n(23),c=n(32),l=function(e){function t(t){var n=e.call(this,t)||this;n.scaleY=o.GameVars.scaleY,n.backButton=new Phaser.GameObjects.Container(n.scene),n.backButton.setPosition(u.GameConstants.GAME_WIDTH/2-90,39),n.backButton.setInteractive(new Phaser.Geom.Rectangle(-30,-30,60,60),Phaser.Geom.Rectangle.Contains),n.backButton.on("pointerdown",function(){n.onClickBack()}),n.backButton.on("pointerover",function(){n.onBtnOver(n.backButton)}),n.backButton.on("pointerout",function(){n.onBtnOut(n.backButton)}),n.add(n.backButton);var a=new Phaser.GameObjects.Graphics(n.scene);a.fillStyle(0),a.fillRect(-30,-30,60,60),n.backButton.add(a),n.backImage=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","btn_return"),n.backButton.add(n.backImage),n.playButton=new Phaser.GameObjects.Container(n.scene),n.playButton.setPosition(u.GameConstants.GAME_WIDTH/2,39),n.playButton.setInteractive(new Phaser.Geom.Rectangle(-35,-35,70,70),Phaser.Geom.Rectangle.Contains),n.playButton.on("pointerdown",function(){n.onClickPlay()}),n.playButton.on("pointerover",function(){n.onBtnOver(n.playButton)}),n.playButton.on("pointerout",function(){n.onBtnOut(n.playButton)}),n.add(n.playButton);var r=new Phaser.GameObjects.Graphics(n.scene);r.fillStyle(0),r.fillRect(-35,-35,70,70),n.playButton.add(r),n.playImage=new Phaser.GameObjects.Image(n.scene,0,2,"texture_atlas_1","btn_pause"),n.playImage.setOrigin(.5),n.playImage.setScale(1.2),n.playButton.add(n.playImage),n.timeStepButton=new Phaser.GameObjects.Container(n.scene),n.timeStepButton.setPosition(u.GameConstants.GAME_WIDTH/2+90,39),n.timeStepButton.setInteractive(new Phaser.Geom.Rectangle(-30,-30,60,60),Phaser.Geom.Rectangle.Contains),n.timeStepButton.on("pointerdown",function(){n.onClickTimeStep()}),n.timeStepButton.on("pointerover",function(){n.onBtnOver(n.timeStepButton)}),n.timeStepButton.on("pointerout",function(){n.onBtnOut(n.timeStepButton)}),n.add(n.timeStepButton);var s=new Phaser.GameObjects.Graphics(n.scene);s.fillStyle(0),s.fillRect(-30,-30,60,60),n.timeStepButton.add(s),n.timeStepImage=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1"),n.timeStepImage.setOrigin(.5),n.timeStepButton.add(n.timeStepImage),1===o.GameVars.timeStepFactor?n.timeStepImage.setFrame("btn_normal_speed"):n.timeStepImage.setFrame("btn_fastforward"),n.exitButton=new Phaser.GameObjects.Container(n.scene),n.exitButton.setPosition(u.GameConstants.GAME_WIDTH-40,39),n.exitButton.setInteractive(new Phaser.Geom.Rectangle(-30,-30,60,60),Phaser.Geom.Rectangle.Contains),n.exitButton.on("pointerdown",function(){n.onClickExit()}),n.exitButton.on("pointerover",function(){n.onBtnOver(n.exitButton)}),n.exitButton.on("pointerout",function(){n.onBtnOut(n.exitButton)}),n.add(n.exitButton);var i=new Phaser.GameObjects.Graphics(n.scene);i.fillStyle(0),i.fillRect(-30,-30,60,60),n.exitButton.add(i);var c=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","btn_exit");n.exitButton.add(c),n.soundButton=new Phaser.GameObjects.Container(n.scene),n.soundButton.setPosition(u.GameConstants.GAME_WIDTH-110,39),n.soundButton.setInteractive(new Phaser.Geom.Rectangle(-30,-30,60,60),Phaser.Geom.Rectangle.Contains),n.soundButton.on("pointerdown",function(){n.onClickSound()}),n.soundButton.on("pointerover",function(){n.onBtnOver(n.soundButton)}),n.soundButton.on("pointerout",function(){n.onBtnOut(n.soundButton)}),n.add(n.soundButton);var l=new Phaser.GameObjects.Graphics(n.scene);return l.fillStyle(0),l.fillRect(-30,-30,60,60),n.soundButton.add(l),n.soundImage=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1"),n.soundImage.setOrigin(.5),n.soundButton.add(n.soundImage),o.GameVars.gameData.soundMuted?n.soundImage.setFrame("btn_sound_off"):n.soundImage.setFrame("btn_sound_on"),n}return r(t,e),t.prototype.onClickPlay=function(){o.GameVars.paused?(i.BattleManager.resume(),this.playImage.setFrame("btn_pause")):(i.BattleManager.pause(),this.playImage.setFrame("btn_play"))},t.prototype.onClickTimeStep=function(){1===o.GameVars.timeStepFactor?(i.BattleManager.setTimeStepFactor(8),this.timeStepImage.setFrame("btn_fastforward")):(i.BattleManager.setTimeStepFactor(1),this.timeStepImage.setFrame("btn_normal_speed"))},t.prototype.onClickBack=function(){s.GameManager.enterLogScene(o.GameVars.initialLogsObjects,o.GameVars.levelObject)},t.prototype.onClickExit=function(){s.GameManager.events.emit("exit")},t.prototype.onClickSound=function(){c.AudioManager.toggleSoundState(),o.GameVars.gameData.soundMuted?this.soundImage.setFrame("btn_sound_off"):this.soundImage.setFrame("btn_sound_on")},t.prototype.onBtnOver=function(e){1===e.alpha&&e.setScale(1.025)},t.prototype.onBtnOut=function(e){1===e.alpha&&e.setScale(1)},t}(Phaser.GameObjects.Container);t.LogGUI=l},470:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=n(19),i=n(64),u=n(32),c=function(e){function t(t,n,a){var r=e.call(this,t,0,0)||this;r.mine=n,r.detonated=!1;var i=Math.random()*s.GameConstants.CELLS_SIZE/2-s.GameConstants.CELLS_SIZE/3,c=Math.random()*s.GameConstants.CELLS_SIZE/2-s.GameConstants.CELLS_SIZE/3;return r.x=a.x,r.y=a.y,r.mineImage=r.scene.add.sprite(0,0,"texture_atlas_1"),r.mineImage.setScale(.5),r.add(r.mineImage),r.mineImage.anims.play("mine"),r.scene.tweens.add({targets:r,x:r.mine.x*s.GameConstants.CELLS_SIZE+i,y:r.mine.y*s.GameConstants.CELLS_SIZE+c,ease:Phaser.Math.Easing.Cubic.Out,duration:1===o.GameVars.timeStepFactor?600:200}),u.AudioManager.playSound("t2_mine_launcher"),r}return r(t,e),t.prototype.update=function(e,t){},t.prototype.detonate=function(){var e=this;this.detonated=!0,this.mineImage.visible=!1;var t=this.scene.add.sprite(0,0,"texture_atlas_1","tower4_fx_01");t.setScale(.75),this.add(t),t.anims.play("explosion"),t.on("animationcomplete",function(){i.BoardContainer.currentInstance.removeMine(e)},this),u.AudioManager.playSound("t2_mine_explosion")},t}(Phaser.GameObjects.Container);t.MineActor=c},471:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),i=n(19),u=s(n(29)),c=n(32),l=function(e){function t(t,n){var a=e.call(this,t)||this;a.turret=n;var r=new Phaser.GameObjects.Graphics(a.scene);r.fillStyle(720958),r.fillRect(-200,-375,400,750),r.alpha=.75,a.add(r);var s=new Phaser.GameObjects.Image(a.scene,0,-315,"texture_atlas_1","title_area");a.add(s);var o=new Phaser.GameObjects.Text(a.scene,0,-315,"TOWER INFO",{fontFamily:"Rubik-Regular",fontSize:"40px",color:"#FFFFFF"});o.setOrigin(.5),a.add(o);var l=-230,d=new Phaser.GameObjects.Text(a.scene,-180,l,"LEVEL:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"});a.add(d),a.levelText=new Phaser.GameObjects.Text(a.scene,50,l,a.turret.level+"/"+a.turret.maxLevel,{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.levelText),l+=35,n.type!==u.GameConstants.TURRET_GLUE?(d=new Phaser.GameObjects.Text(a.scene,-180,l,"DAMAGE:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(d),a.damageText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.damage),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.damageText)):(a.intensityTextAux=new Phaser.GameObjects.Text(a.scene,-180,l,"INTENSITY:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.intensityTextAux),a.intensityText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.intensity),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.intensityText),l+=35,a.distanceTextAux=new Phaser.GameObjects.Text(a.scene,-180,l,"DISTANCE:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.distanceTextAux),a.distanceText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.teleportDistance),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.distanceText),a.durationTextAux=new Phaser.GameObjects.Text(a.scene,-180,l,"DURATION:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.durationTextAux),a.durationText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.duration),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.durationText)),l+=35,n.type===u.GameConstants.TURRET_LAUNCH&&(d=new Phaser.GameObjects.Text(a.scene,-180,l,"EXPLOSION RANGE:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(d),a.explosionText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.explosionRange),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.explosionText),l+=35),d=new Phaser.GameObjects.Text(a.scene,-180,l,"RELOAD:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(d),a.reloadText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.reload),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.reloadText),l+=35,d=new Phaser.GameObjects.Text(a.scene,-180,l,"RANGE:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(d),a.rangeText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.range),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.rangeText),l+=35,n.type!==u.GameConstants.TURRET_GLUE&&(d=new Phaser.GameObjects.Text(a.scene,-180,l,"INFLICTED:",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(d),a.inflictedText=new Phaser.GameObjects.Text(a.scene,50,l,i.GameVars.formatNumber(a.turret.inflicted),{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#FFFFFF"}),a.add(a.inflictedText));l=20,a.strategyButton=new Phaser.GameObjects.Container(a.scene),a.strategyButton.setPosition(0,l),a.strategyButton.setInteractive(new Phaser.Geom.Rectangle(-175,-20,350,40),Phaser.Geom.Rectangle.Contains),a.strategyButton.on("pointerover",function(){a.onBtnOver(a.strategyButton)}),a.strategyButton.on("pointerout",function(){a.onBtnOut(a.strategyButton)}),a.strategyButton.on("pointerdown",function(){a.onClickStrategy()}),a.add(a.strategyButton);var m=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","btn_rectangle");a.strategyButton.add(m),a.strategyText=new Phaser.GameObjects.Text(a.scene,0,0,"STRATEGY ("+n.shootingStrategy+")",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#00B4FF"}),a.strategyText.setOrigin(.5),a.strategyButton.add(a.strategyText),l+=65,a.objectiveButton=new Phaser.GameObjects.Container(a.scene),a.objectiveButton.setPosition(0,l),a.objectiveButton.setInteractive(new Phaser.Geom.Rectangle(-175,-20,350,40),Phaser.Geom.Rectangle.Contains),a.objectiveButton.on("pointerover",function(){a.onBtnOver(a.objectiveButton)}),a.objectiveButton.on("pointerout",function(){a.onBtnOut(a.objectiveButton)}),a.objectiveButton.on("pointerdown",function(){a.onClickObjective()}),a.add(a.objectiveButton);var h=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","btn_rectangle");a.objectiveButton.add(h),a.objectiveText=new Phaser.GameObjects.Text(a.scene,0,0,"FIXED TARGET ("+(n.fixedTarget?"On":"Off")+")",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#00B4FF"}),a.objectiveText.setOrigin(.5),a.objectiveButton.add(a.objectiveText),l+=90,a.levelButton=new Phaser.GameObjects.Container(a.scene),a.levelButton.setPosition(0,l),a.levelButton.setInteractive(new Phaser.Geom.Rectangle(-175,-20,350,40),Phaser.Geom.Rectangle.Contains),a.levelButton.on("pointerover",function(){a.onBtnOver(a.levelButton)}),a.levelButton.on("pointerout",function(){a.onBtnOut(a.levelButton)}),a.levelButton.on("pointerdown",function(){a.onClickLevel()}),a.add(a.levelButton);var f=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","btn_rectangle");a.levelButton.add(f),a.levelUpText=new Phaser.GameObjects.Text(a.scene,0,0,"LEVEL UP ("+i.GameVars.formatNumber(n.priceImprovement)+")",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#00B4FF"}),a.levelUpText.setOrigin(.5),a.levelButton.add(a.levelUpText),l+=65,a.upgradeButton=new Phaser.GameObjects.Container(a.scene),a.upgradeButton.setPosition(0,l),a.upgradeButton.setInteractive(new Phaser.Geom.Rectangle(-175,-20,350,40),Phaser.Geom.Rectangle.Contains),a.upgradeButton.on("pointerover",function(){a.onBtnOver(a.upgradeButton)}),a.upgradeButton.on("pointerout",function(){a.onBtnOut(a.upgradeButton)}),a.upgradeButton.on("pointerdown",function(){a.onClickUpgrade()}),a.add(a.upgradeButton);var p=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","btn_rectangle");a.upgradeButton.add(p),a.upgradeText=new Phaser.GameObjects.Text(a.scene,0,0,"UPGRADE ("+i.GameVars.formatNumber(n.priceUpgrade)+")",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#00B4FF"}),a.upgradeText.setOrigin(.5),a.upgradeButton.add(a.upgradeText),l+=65,a.sellButton=new Phaser.GameObjects.Container(a.scene),a.sellButton.setPosition(0,l),a.sellButton.setInteractive(new Phaser.Geom.Rectangle(-175,-20,350,40),Phaser.Geom.Rectangle.Contains),a.sellButton.on("pointerover",function(){a.onBtnOver(a.sellButton)}),a.sellButton.on("pointerout",function(){a.onBtnOut(a.sellButton)}),a.sellButton.on("pointerdown",function(){a.onClickSell()}),a.add(a.sellButton);var _=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","btn_rectangle");return a.sellButton.add(_),a.sellText=new Phaser.GameObjects.Text(a.scene,0,0,"SELL ("+i.GameVars.formatNumber(n.sellValue)+")",{fontFamily:"Rubik-Regular",fontSize:"24px",color:"#00B4FF"}),a.sellText.setOrigin(.5),a.sellButton.add(a.sellText),a.checkAndUpdateInfo(),a.setScale(.95),a.setAlpha(.7),a.scene.tweens.add({targets:a,scaleX:1,scaleY:1,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:250}),a.scene.sys.updateList.add(a),c.AudioManager.playSound("menu_emerging"),a}return r(t,e),t.prototype.preUpdate=function(e,t){o.BattleManager.engine.credits<this.turret.priceImprovement?this.levelButton.alpha=.5:this.turret.level!==this.turret.maxLevel&&(this.levelButton.alpha=1),o.BattleManager.engine.credits<this.turret.priceUpgrade?this.upgradeButton.alpha=.5:3!==this.turret.grade&&(this.upgradeButton.alpha=1)},t.prototype.checkAndUpdateInfo=function(){this.turret.type===u.GameConstants.TURRET_GLUE&&(3===this.turret.grade?(this.durationTextAux.visible=!1,this.durationText.visible=!1,this.intensityTextAux.visible=!1,this.intensityText.visible=!1,this.distanceTextAux.visible=!0,this.distanceText.visible=!0):(this.durationTextAux.visible=!0,this.durationText.visible=!0,this.intensityTextAux.visible=!0,this.intensityText.visible=!0,this.distanceTextAux.visible=!1,this.distanceText.visible=!1)),this.levelUpText.setText("LEVEL UP ("+i.GameVars.formatNumber(this.turret.priceImprovement)+")"),this.upgradeText.setText("UPGRADE ("+i.GameVars.formatNumber(this.turret.priceUpgrade)+")"),this.sellText.setText("SELL ("+i.GameVars.formatNumber(this.turret.sellValue)+")"),(this.turret.type===u.GameConstants.TURRET_GLUE&&1===this.turret.grade||this.turret.type===u.GameConstants.TURRET_LAUNCH&&2===this.turret.grade)&&(this.strategyButton.alpha=.5,this.objectiveButton.alpha=.5,this.strategyText.setText("STRATEGY"),this.objectiveText.setText("FIXED TARGET")),this.turret.level===this.turret.maxLevel?(this.levelButton.alpha=.5,this.levelUpText.setText("LEVEL UP")):this.levelButton.alpha=1,3===this.turret.grade&&(this.upgradeButton.alpha=.5,this.upgradeText.setText("UPGRADE")),this.levelText.setText(this.turret.level+"/"+this.turret.maxLevel),this.turret.type!==u.GameConstants.TURRET_GLUE?this.damageText.setText(i.GameVars.formatNumber(this.turret.damage)):(this.intensityText.setText(i.GameVars.formatNumber(this.turret.intensity)),this.durationText.setText(i.GameVars.formatNumber(this.turret.duration)),this.distanceText.setText(i.GameVars.formatNumber(this.turret.teleportDistance))),this.turret.type===u.GameConstants.TURRET_LAUNCH&&this.explosionText.setText(i.GameVars.formatNumber(this.turret.explosionRange)),this.reloadText.setText(i.GameVars.formatNumber(this.turret.reload)),this.rangeText.setText(i.GameVars.formatNumber(this.turret.range)),this.turret.type!==u.GameConstants.TURRET_GLUE&&this.inflictedText.setText(i.GameVars.formatNumber(this.turret.inflicted))},t.prototype.onBtnOver=function(e){1===e.alpha&&e.setScale(1.025)},t.prototype.onBtnOut=function(e){1===e.alpha&&e.setScale(1)},t.prototype.onClickStrategy=function(){1===this.strategyButton.alpha&&(o.BattleManager.setNextStrategy(this.turret.id),this.strategyText.setText("STRATEGY ("+this.turret.shootingStrategy+")"))},t.prototype.onClickObjective=function(){1===this.objectiveButton.alpha&&(o.BattleManager.setFixedTarget(this.turret.id),this.objectiveText.setText("FIXED TARGET ("+(this.turret.fixedTarget?"On":"Off")+")"))},t.prototype.onClickLevel=function(){1===this.levelButton.alpha&&(o.BattleManager.improveTurret(this.turret.id),this.checkAndUpdateInfo())},t.prototype.onClickUpgrade=function(){1===this.upgradeButton.alpha&&(o.BattleManager.upgradeTower(this.turret.id),this.checkAndUpdateInfo())},t.prototype.onClickSell=function(){o.BattleManager.sellTurret(this.turret.id)},t}(Phaser.GameObjects.Container);t.TurretMenu=l},472:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=n(19),i=n(32),u=function(e){function t(t,n,a){var r=e.call(this,t)||this;r.glueTurretActor=n,r.glue=a,r.id=a.id,r.x=r.glueTurretActor.x,r.y=r.glueTurretActor.y;var u=r.glue.range*s.GameConstants.CELLS_SIZE,c=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","area_freeze");return c.setScale(2*u/c.width),r.add(c),r.drawFx(),r.scene.tweens.add({targets:r,scaleX:1,scaleY:1,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:1===o.GameVars.timeStepFactor?600:200}),r.setScale(0),r.alpha=0,i.AudioManager.playSound("t2_hielo"),r}return r(t,e),t.prototype.destroy=function(){var t=this;this.scene.tweens.add({targets:this,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:1===o.GameVars.timeStepFactor?600:200,onComplete:function(){e.prototype.destroy.call(t)},onCompleteScope:this})},t.prototype.drawFx=function(){var e=180*Math.random(),t=40,n=Phaser.Math.DegToRad(40*Math.random()-20+e),a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n),t*Math.sin(n),"texture_atlas_1","bullet_fx_3");a.setScale(.4),this.add(a),t=65,(a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n),t*Math.sin(n),"texture_atlas_1","bullet_fx_3")).setScale(.25),this.add(a),n=Phaser.Math.DegToRad(100+40*Math.random()+e),t=40,(a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n),t*Math.sin(n),"texture_atlas_1","bullet_fx_3")).setScale(.25),this.add(a),t=65,(a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n),t*Math.sin(n),"texture_atlas_1","bullet_fx_3")).setScale(.4),this.add(a),t=54,(a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n+.45),t*Math.sin(n+.45),"texture_atlas_1","bullet_fx_3")).setScale(.15),this.add(a),n=Phaser.Math.DegToRad(220+40*Math.random()+e),t=50,(a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n-.1),t*Math.sin(n-.1),"texture_atlas_1","bullet_fx_3")).setScale(.3),this.add(a),t=65,(a=new Phaser.GameObjects.Image(this.scene,t*Math.cos(n+.25),t*Math.sin(n+.25),"texture_atlas_1","bullet_fx_3")).setScale(.25),this.add(a)},t}(Phaser.GameObjects.Container);t.GluePool=u},473:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n){var a=e.call(this,t)||this;return a.totalLife=n,a.bar=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","life_bar_1"),a.bar.setOrigin(0),a.add(a.bar),a.visible=!1,a}return r(t,e),t.prototype.updateValue=function(e){var t=Math.round(e/this.totalLife*40);this.bar.setFrame("life_bar_"+Math.max(t,1))},t.WIDTH=43,t}(Phaser.GameObjects.Container);t.LifeBar=s},474:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=n(19),i=function(e){function t(t){var n=e.call(this,t)||this;n.x=-s.GameConstants.CELLS_SIZE*o.GameVars.currentMapData.size.c/2,n.y=-s.GameConstants.CELLS_SIZE*o.GameVars.currentMapData.size.r/2,n.pathContainer=new Phaser.GameObjects.Container(n.scene),n.add(n.pathContainer),n.boardMatrix=new Array(o.GameVars.currentMapData.size.r);for(var a=0;a<n.boardMatrix.length;a++)0===o.GameVars.plateausCells.length?n.boardMatrix[a]=new Array(o.GameVars.currentMapData.size.c).fill(2):n.boardMatrix[a]=new Array(o.GameVars.currentMapData.size.c).fill(0);for(a=0;a<o.GameVars.plateausCells.length;a++)n.boardMatrix[o.GameVars.plateausCells[a].r][o.GameVars.plateausCells[a].c]=2;for(a=0;a<o.GameVars.enemiesPathCells.length;a++)o.GameVars.enemiesPathCells[a].c<0||o.GameVars.enemiesPathCells[a].r<0||o.GameVars.enemiesPathCells[a].c>=o.GameVars.currentMapData.size.c||o.GameVars.enemiesPathCells[a].r>=o.GameVars.currentMapData.size.r||(n.boardMatrix[o.GameVars.enemiesPathCells[a].r][o.GameVars.enemiesPathCells[a].c]=1);for(a=-5;a<n.boardMatrix.length+5;a++)for(var r=-2;r<n.boardMatrix[0].length+2;r++){var i=new Phaser.GameObjects.Image(n.scene,s.GameConstants.CELLS_SIZE*r+s.GameConstants.CELLS_SIZE/2,s.GameConstants.CELLS_SIZE*a+s.GameConstants.CELLS_SIZE/2,"texture_atlas_1","celda_void");n.pathContainer.add(i)}for(a=0;a<n.boardMatrix.length;a++)for(r=0;r<n.boardMatrix[a].length;r++)if(1===n.boardMatrix[a][r]){var u=new Phaser.GameObjects.Graphics(n.scene);u.fillStyle(24),u.fillRect(s.GameConstants.CELLS_SIZE*r,s.GameConstants.CELLS_SIZE*a,s.GameConstants.CELLS_SIZE,s.GameConstants.CELLS_SIZE),n.pathContainer.add(u)}else if(2===n.boardMatrix[a][r]){i=new Phaser.GameObjects.Image(n.scene,s.GameConstants.CELLS_SIZE*r+s.GameConstants.CELLS_SIZE/2,s.GameConstants.CELLS_SIZE*a+s.GameConstants.CELLS_SIZE/2,"texture_atlas_1",n.selectTypeCell(a,r));n.pathContainer.add(i)}return n}return r(t,e),t.prototype.sendActorBack=function(e){this.sendToBack(e),this.sendToBack(this.pathContainer)},t.prototype.selectTypeCell=function(e,t){var n=[0,0,0,0,0,0,0,0];this.boardMatrix[e-1]&&this.boardMatrix[e-1][t]&&2===this.boardMatrix[e-1][t]&&(n[0]=1),this.boardMatrix[e-1]&&this.boardMatrix[e-1][t+1]&&2===this.boardMatrix[e-1][t+1]&&(n[1]=1),this.boardMatrix[e]&&this.boardMatrix[e][t+1]&&2===this.boardMatrix[e][t+1]&&(n[2]=1),this.boardMatrix[e+1]&&this.boardMatrix[e+1][t+1]&&2===this.boardMatrix[e+1][t+1]&&(n[3]=1),this.boardMatrix[e+1]&&this.boardMatrix[e+1][t]&&2===this.boardMatrix[e+1][t]&&(n[4]=1),this.boardMatrix[e+1]&&this.boardMatrix[e+1][t-1]&&2===this.boardMatrix[e+1][t-1]&&(n[5]=1),this.boardMatrix[e]&&this.boardMatrix[e][t-1]&&2===this.boardMatrix[e][t-1]&&(n[6]=1),this.boardMatrix[e-1]&&this.boardMatrix[e-1][t-1]&&2===this.boardMatrix[e-1][t-1]&&(n[7]=1);var a="celda_";return 0===n[0]&&0===n[2]&&0===n[4]&&0===n[6]?a+="01":0===n[0]&&0===n[2]&&0===n[6]?a+="03":0===n[0]&&0===n[2]&&0===n[4]?a+="04":0===n[6]&&0===n[2]&&0===n[4]?a+="05":0===n[6]&&0===n[0]&&0===n[4]?a+="06":0===n[0]&&0===n[2]?1===n[5]?a+="07":a+="38":0===n[0]&&0===n[6]?1===n[3]?a+="08":a+="41":0===n[2]&&0===n[4]?1===n[7]?a+="09":a+="39":0===n[6]&&0===n[4]?1===n[1]?a+="10":a+="40":0===n[0]&&0===n[4]?a+="11":0===n[2]&&0===n[6]?a+="12":0===n[6]?0===n[1]&&0===n[3]?a+="45":0===n[1]?a+="35":0===n[3]?a+="36":a+="13":0===n[0]?0===n[5]&&0===n[3]?a+="42":0===n[5]?a+="30":0===n[3]?a+="37":a+="14":0===n[2]?0===n[5]&&0===n[7]?a+="43":0===n[5]?a+="31":0===n[7]?a+="32":a+="15":0===n[4]?0===n[1]&&0===n[7]?a+="44":0===n[1]?a+="34":0===n[7]?a+="33":a+="16":0===n[1]&&0===n[3]&&0===n[5]&&0===n[7]?a+="17":0===n[3]&&0===n[5]&&0===n[7]?a+="18":0===n[5]&&0===n[1]&&0===n[7]?a+="19":0===n[3]&&0===n[1]&&0===n[7]?a+="20":0===n[3]&&0===n[1]&&0===n[5]?a+="21":0===n[3]&&0===n[5]?a+="22":0===n[7]&&0===n[5]?a+="23":0===n[7]&&0===n[1]?a+="24":0===n[3]&&0===n[1]?a+="25":0===n[5]?a+="26":0===n[7]?a+="27":0===n[1]?a+="28":0===n[3]?a+="29":a+="02",a},t}(Phaser.GameObjects.Container);t.Board=i},475:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=function(e){function t(t,n){var a=e.call(this,t,0,0,"texture_atlas_1","bullet_1_1")||this;return a.bullet=n,a.setScale(.75),a.setOrigin(.5,0),a.visible=!1,a.x=a.bullet.x*s.GameConstants.CELLS_SIZE,a.y=a.bullet.y*s.GameConstants.CELLS_SIZE,a.realX=a.x,a.realY=a.y,a.initialPosition={x:a.x,y:a.y},a}return r(t,e),t.prototype.update=function(e,t){var n;n=s.GameConstants.INTERPOLATE_TRAJECTORIES?.3:1;var a=(this.bullet.x*s.GameConstants.CELLS_SIZE-this.realX)*n,r=(this.bullet.y*s.GameConstants.CELLS_SIZE-this.realY)*n;this.realX+=a,this.realY+=r,this.rotation=Math.atan2(r,a)+Math.PI/2;var o=0,i=0;if("left"===this.bullet.canonShoot?(o=7.5*Math.cos(this.rotation),i=7.5*Math.sin(this.rotation)):"right"===this.bullet.canonShoot&&(o=-7.5*Math.cos(this.rotation),i=-7.5*Math.sin(this.rotation)),this.x=this.realX+o,this.y=this.realY+i,!this.visible){var u=this.initialPosition.x-this.x,c=this.initialPosition.y-this.y;Math.sqrt(u*u+c*c)>45&&(this.visible=!0)}},t}(Phaser.GameObjects.Image);t.BulletActor=o},476:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n,a){return e.call(this,t,n,a)||this}return r(t,e),t.prototype.update=function(t,n){e.prototype.update.call(this,t,n);var a=this.enemy;a.healing&&"enemy_healer_run"===this.img.anims.currentAnim.key?this.enemy.affectedByGlue||this.enemy.affectedByGlueBullet?this.img.anims.play("enemy_healer_heal_frozen"):this.img.anims.play("enemy_healer_heal"):a.healing||"enemy_healer_heal"!==this.img.anims.currentAnim.key||(this.enemy.affectedByGlue||this.enemy.affectedByGlueBullet?this.img.anims.play("enemy_healer_run_frozen"):this.img.anims.play("enemy_healer_run"))},t}(n(389).EnemyActor);t.HealerEnemyActor=s},477:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),i=n(110),u=n(19),c=s(n(29)),l=function(e){function t(t,n,a){var r=e.call(this,t,c.GameConstants.TURRET_PROJECTILE,n,a)||this;return r.base=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","base_1_1"),r.base.setInteractive(),r.base.on("pointerdown",r.onDownTurret,r),r.base.on("pointerover",r.onOverTurret,r),r.base.on("pointerout",r.onOutTurret,r),r.addAt(r.base,0),r.canon=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","canon_1_1_1"),r.add(r.canon),r.bringToTop(r.turretLevel),r}return r(t,e),t.prototype.upgrade=function(){switch(e.prototype.upgrade.call(this),this.turret.grade){case 2:this.base.setFrame("base_1_2"),this.canon.setFrame("canon_1_2_1");break;case 3:this.base.setFrame("base_1_3"),this.canon.setFrame("canon_1_3_1")}},t.prototype.shootBullet=function(){var e=this;this.canon.rotation=this.turret.shootAngle+Math.PI/2,o.AudioManager.playSound("t1_bullets"),this.scene.tweens.add({targets:this.canon,x:-5*Math.sin(this.canon.rotation),y:5*Math.cos(this.canon.rotation),ease:Phaser.Math.Easing.Cubic.Out,duration:1===u.GameVars.timeStepFactor?40:10,onComplete:function(){e.scene&&e.scene.tweens.add({targets:e.canon,x:0,y:0,ease:Phaser.Math.Easing.Cubic.Out,duration:1===u.GameVars.timeStepFactor?40:10})},onCompleteScope:this})},t}(i.TurretActor);t.ProjectileTurretActor=l},478:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(19),o=function(e){function t(t,n){var a=e.call(this,t)||this;a.y=22,a.turret=n,a.stars=[];var r=new Phaser.GameObjects.Image(a.scene,-22,0,"texture_atlas_1","star_01");return r.setScale(1.2),a.add(r),a.stars.push(r),(r=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1","star_01")).setScale(1.2),a.add(r),a.stars.push(r),(r=new Phaser.GameObjects.Image(a.scene,22,0,"texture_atlas_1","star_01")).setScale(1.2),a.add(r),a.stars.push(r),a}return r(t,e),t.prototype.update=function(){s.GameVars.paused||s.GameVars.semipaused||s.GameVars.waveOver||s.GameVars.turretSelectedOn||this.turret.showLevel?(this.visible||(this.visible=!0),5===this.turret.turret.maxLevel?(this.stars[0].visible=!0,this.stars[1].visible=!1,this.stars[2].visible=!1,this.stars[0].x=0):10===this.turret.turret.maxLevel?(this.stars[0].visible=!0,this.stars[1].visible=!0,this.stars[2].visible=!1,this.stars[0].x=-12,this.stars[1].x=12):(this.stars[0].visible=!0,this.stars[1].visible=!0,this.stars[2].visible=!0,this.stars[0].x=-22,this.stars[1].x=0,this.stars[2].x=22),this.turret.turret.level<=5?(this.stars[0].setFrame("star_0"+(this.turret.turret.level+1)),this.stars[1].setFrame("star_01"),this.stars[2].setFrame("star_01")):this.turret.turret.level<=10?(this.stars[1].setFrame("star_0"+(this.turret.turret.level-5+1)),this.stars[0].setFrame("star_06"),this.stars[2].setFrame("star_01")):(this.stars[2].setFrame("star_0"+(this.turret.turret.level-10+1)),this.stars[0].setFrame("star_06"),this.stars[1].setFrame("star_06"))):this.visible&&(this.visible=!1)},t}(Phaser.GameObjects.Container);t.TurretLevel=o},479:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(32),i=n(110),u=n(19),c=s(n(29)),l=function(e){function t(t,n,a){var r=e.call(this,t,c.GameConstants.TURRET_LASER,n,a)||this;return r.base=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","base_2_1"),r.base.setInteractive(),r.base.on("pointerdown",r.onDownTurret,r),r.base.on("pointerover",r.onOverTurret,r),r.base.on("pointerout",r.onOutTurret,r),r.addAt(r.base,0),r.canon=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","canon_2_1_1"),r.add(r.canon),r.canonLength=30,r.laserShoot=!1,r.bringToTop(r.turretLevel),r}return r(t,e),t.prototype.update=function(t,n){this.laserShoot?this.f++===this.framesDuration&&(this.laserShoot=!1):e.prototype.update.call(this,t,n)},t.prototype.upgrade=function(){switch(e.prototype.upgrade.call(this),this.turret.grade){case 2:this.base.setFrame("base_2_2"),this.canon.setFrame("canon_2_2_1");break;case 3:this.base.setFrame("base_2_2"),this.canon.setFrame("canon_2_3_1")}},t.prototype.shootLaser=function(e){var t=e[0].x-this.x,n=e[0].y-this.y;this.canon.rotation=Math.atan2(n,t)+Math.PI/2,this.laserShoot=!0,this.framesDuration=1===u.GameVars.timeStepFactor?24:6,this.f=0,o.AudioManager.playSound("t2_laser"+this.turret.grade)},t}(i.TurretActor);t.LaserTurretActor=l},480:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(19),o=function(e){function t(t,n,a,r){var o=e.call(this,t)||this;o.laserTurretActor=n,o.enemyActors=a,o.grade=r,o.f=0,o.framesDuration=1===s.GameVars.timeStepFactor?16:4,o.lines=[],o.circles=[],o.ends=[],o.impact_x=[],o.impact_y=[];for(var i=0;i<o.enemyActors.length;i++)o.impact_x.push(o.enemyActors[i].x),o.impact_y.push(o.enemyActors[i].y);if(3===o.grade){var u=o.enemyActors[0].x,c=o.enemyActors[0].y;u+=50*(u-(m=o.laserTurretActor.x+o.laserTurretActor.canonLength*Math.cos(o.laserTurretActor.canon.rotation-Math.PI/2))),c+=50*(c-(h=o.laserTurretActor.y+o.laserTurretActor.canonLength*Math.sin(o.laserTurretActor.canon.rotation-Math.PI/2))),(d=new Phaser.GameObjects.Image(o.scene,u,c,"texture_atlas_1","bullet_2_mid")).scaleX=Math.hypot(c-h,u-m)/d.width,d.setOrigin(1,.5),d.setAngle(180*Math.atan2(c-h,u-m)/Math.PI),o.add(d),o.lines.push(d);var l=new Phaser.GameObjects.Image(o.scene,m,h,"texture_atlas_1","bullet_2_light");o.add(l)}else{o.impact_x=[],o.impact_y=[];for(i=0;i<o.enemyActors.length;i++)o.impact_x.push(o.enemyActors[i].x),o.impact_y.push(o.enemyActors[i].y);for(i=0;i<o.enemyActors.length;i++){u=void 0,c=void 0;var d,m=void 0,h=void 0;0===i?(u=o.impact_x[i],c=o.impact_y[i],m=o.laserTurretActor.x+o.laserTurretActor.canonLength*Math.cos(o.laserTurretActor.canon.rotation-Math.PI/2),h=o.laserTurretActor.y+o.laserTurretActor.canonLength*Math.sin(o.laserTurretActor.canon.rotation-Math.PI/2)):(u=o.impact_x[i],c=o.impact_y[i],m=o.impact_x[i-1],h=o.impact_y[i-1]),(d=new Phaser.GameObjects.Image(o.scene,u,c,"texture_atlas_1","bullet_2_mid")).scaleX=Math.hypot(c-h,u-m)/d.width,d.scaleY=.4+.2*o.grade,d.setOrigin(1,.5),d.setAngle(180*Math.atan2(c-h,u-m)/Math.PI),o.add(d),o.lines.push(d);var f=new Phaser.GameObjects.Image(o.scene,u,c,"texture_atlas_1","bullet_2_tip");f.scaleY=.4+.2*o.grade,f.setOrigin(0,.5),f.setAngle(180*Math.atan2(c-h,u-m)/Math.PI),o.add(f),o.ends.push(f);l=new Phaser.GameObjects.Image(o.scene,m,h,"texture_atlas_1","bullet_2_light");o.add(l),o.circles.push(l)}}return o.scene.sys.updateList.add(o),o}return r(t,e),t.prototype.preUpdate=function(e,t){if(this.f++!==this.framesDuration)if(3===this.grade){var n=this.enemyActors[0].x,a=this.enemyActors[0].y;n+=50*(n-(s=this.laserTurretActor.x+this.laserTurretActor.canonLength*Math.cos(this.laserTurretActor.canon.rotation-Math.PI/2))),a+=50*(a-(o=this.laserTurretActor.y+this.laserTurretActor.canonLength*Math.sin(this.laserTurretActor.canon.rotation-Math.PI/2))),this.lines[0]&&(this.lines[0].setPosition(n,a),this.lines[0].scaleX=1,this.lines[0].scaleX=Math.hypot(a-o,n-s)/this.lines[0].width,this.lines[0].setAngle(180*Math.atan2(a-o,n-s)/Math.PI)),this.circles[0]&&this.circles[0].setPosition(s,o)}else{this.impact_x=[],this.impact_y=[];for(var r=0;r<this.enemyActors.length;r++)this.impact_x.push(this.enemyActors[r].x),this.impact_y.push(this.enemyActors[r].y);for(r=0;r<this.enemyActors.length;r++){n=void 0,a=void 0;var s=void 0,o=void 0;0===r?(n=this.impact_x[r],a=this.impact_y[r],s=this.laserTurretActor.x+this.laserTurretActor.canonLength*Math.cos(this.laserTurretActor.canon.rotation-Math.PI/2),o=this.laserTurretActor.y+this.laserTurretActor.canonLength*Math.sin(this.laserTurretActor.canon.rotation-Math.PI/2)):(n=this.impact_x[r],a=this.impact_y[r],s=this.impact_x[r-1],o=this.impact_y[r-1]),this.lines[r]&&(this.lines[r].setPosition(n,a),this.lines[r].scaleX=1,this.lines[r].scaleX=Math.hypot(a-o,n-s)/this.lines[r].width,this.lines[r].setAngle(180*Math.atan2(a-o,n-s)/Math.PI)),this.ends[r]&&(this.ends[r].setPosition(n,a),this.ends[r].setAngle(180*Math.atan2(a-o,n-s)/Math.PI)),this.circles[r]&&this.circles[r].setPosition(s,o)}}else this.destroy()},t}(Phaser.GameObjects.Container);t.LaserBeam=o},481:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(110),i=n(19),u=s(n(29)),c=function(e){function t(t,n,a){var r=e.call(this,t,u.GameConstants.TURRET_LAUNCH,n,a)||this;return r.base=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","base_4_1"),r.base.setInteractive(),r.base.on("pointerdown",r.onDownTurret,r),r.base.on("pointerover",r.onOverTurret,r),r.base.on("pointerout",r.onOutTurret,r),r.addAt(r.base,0),r.canon=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","canon_4_1_1"),r.add(r.canon),r.bringToTop(r.turretLevel),r}return r(t,e),t.prototype.update=function(e,t){},t.prototype.upgrade=function(){switch(e.prototype.upgrade.call(this),this.turret.grade){case 2:this.base.setFrame("base_4_2"),this.canon.setFrame("canon_4_2_1");break;case 3:this.base.setFrame("base_4_2"),this.canon.setFrame("canon_4_3_1")}},t.prototype.shootMortar=function(){this.canon.rotation=this.turret.shootAngle+Math.PI/2,this.scene.tweens.add({targets:this.canon,x:-5*Math.sin(this.canon.rotation),y:5*Math.cos(this.canon.rotation),ease:Phaser.Math.Easing.Cubic.Out,duration:1===i.GameVars.timeStepFactor?300:75,yoyo:!0})},t.prototype.shootMine=function(){this.canon.rotation=this.turret.shootAngle+Math.PI/2,this.scene.tweens.add({targets:this.canon,x:-5*Math.sin(this.canon.rotation),y:5*Math.cos(this.canon.rotation),ease:Phaser.Math.Easing.Cubic.Out,duration:1===i.GameVars.timeStepFactor?80:20,yoyo:!0})},t}(o.TurretActor);t.LaunchTurretActor=c},482:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=n(19),i=n(64),u=n(36),c=n(32),l=function(e){function t(t,n){var a=e.call(this,t)||this;return a.mortar=n,a.detonated=!1,a.x=a.mortar.x*s.GameConstants.CELLS_SIZE,a.y=a.mortar.y*s.GameConstants.CELLS_SIZE,a.initialPosition={x:a.x,y:a.y},a.mortarImage=new Phaser.GameObjects.Image(a.scene,0,0,"texture_atlas_1",1===n.grade?"granade":"bullet_4_3"),a.mortarImage.setScale(.5),a.add(a.mortarImage),a.rotation=Math.random()*Math.PI,a.visible=!1,a.deltaAngle=Math.random()>.5?.5:-.5,1===a.mortar.grade?c.AudioManager.playSound("t1_cannon"):c.AudioManager.playSound("t3_missile_launcher"),a}return r(t,e),t.prototype.update=function(e,t){if(!this.detonated){if(!this.visible){var n=this.initialPosition.x-this.x,a=this.initialPosition.y-this.y;Math.sqrt(n*n+a*a)>30&&(this.visible=!0)}var r,i,c=u.BattleManager.engine.ticksCounter-this.mortar.creationTick;r=c<this.mortar.ticksToImpact/2?.75*(1+c/(this.mortar.ticksToImpact/2)):.75*(1+(this.mortar.ticksToImpact-c)/(this.mortar.ticksToImpact/2)),this.mortarImage.setScale(r),i=s.GameConstants.INTERPOLATE_TRAJECTORIES?1===o.GameVars.timeStepFactor?.2:.65:1;var l=(this.mortar.x*s.GameConstants.CELLS_SIZE-this.x)*i,d=(this.mortar.y*s.GameConstants.CELLS_SIZE-this.y)*i;this.x+=l,this.y+=d,3===this.mortar.grade&&(this.rotation=Math.atan2(d,l)+Math.PI/2),1===this.mortar.grade&&(this.mortarImage.angle+=this.deltaAngle)}},t.prototype.detonate=function(){var e=this;this.visible=!0,this.detonated=!0,this.mortarImage.visible=!1;var t=this.scene.add.sprite(0,0,"texture_atlas_1","tower4_fx_01");1===this.mortar.turret.grade?(t.setScale(.5),c.AudioManager.playSound("t1_explosion")):3===this.mortar.turret.grade&&(t.setScale(.75),c.AudioManager.playSound("t2_mine_explosion")),this.add(t),t.anims.play("explosion"),t.on("animationcomplete",function(){i.BoardContainer.currentInstance.removeMortar(e)},this)},t}(Phaser.GameObjects.Container);t.MortarActor=l},483:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(110),i=n(32),u=n(19),c=s(n(29)),l=function(e){function t(t,n,a){var r=e.call(this,t,c.GameConstants.TURRET_GLUE,n,a)||this;return r.base=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","base_3_1"),r.base.setInteractive(),r.base.on("pointerdown",r.onDownTurret,r),r.base.on("pointerover",r.onOverTurret,r),r.base.on("pointerout",r.onOutTurret,r),r.addAt(r.base,0),r.canon=new Phaser.GameObjects.Image(r.scene,0,0,"texture_atlas_1","canon_3_2_1"),r.canon.visible=!1,r.add(r.canon),r.bringToTop(r.turretLevel),r}return r(t,e),t.prototype.update=function(e,t){},t.prototype.upgrade=function(){switch(e.prototype.upgrade.call(this),this.turret.grade){case 2:this.base.setFrame("base_3_2"),this.canon.setFrame("canon_3_2_1"),this.canon.visible=!0;break;case 3:this.base.setFrame("base_3_3"),this.canon.visible=!1}},t.prototype.shootGlue=function(){if(this.turret.shootAngle&&(this.canon.rotation=this.turret.shootAngle+Math.PI/2,this.scene.tweens.add({targets:this.canon,x:this.canon.x-5*Math.sin(this.canon.rotation),y:this.canon.y+5*Math.cos(this.canon.rotation),ease:Phaser.Math.Easing.Cubic.Out,duration:1===u.GameVars.timeStepFactor?80:20,yoyo:!0})),2===this.turret.grade){i.AudioManager.playSound("t3_pegamento");var e=this.scene.add.sprite(30*Math.sin(this.canon.rotation),-30*Math.cos(this.canon.rotation),"texture_atlas_1");e.setScale(.25),this.add(e),e.anims.play("glue_fx"),e.on("animationcomplete",function(){e.destroy()},this)}},t}(o.TurretActor);t.GlueTurretActor=l},484:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(32),o=n(35),i=n(23),u=n(19),c=n(387),l=n(388),d=function(e){function t(t){var n=e.call(this,t)||this,a=[new c.MenuButton(n.scene,"RESTART",function(){return o.GameManager.reset()}),new c.MenuButton(n.scene,u.GameVars.gameData.soundMuted?"SOUND ON":"SOUND OFF",function(e){s.AudioManager.toggleSoundState(),e.setLabel(u.GameVars.gameData.soundMuted?"SOUND ON":"SOUND OFF")}),new c.MenuButton(n.scene,u.GameVars.gameData.musicMuted?"MUSIC ON":"MUSIC OFF",function(e){s.AudioManager.toggleMusicState(),e.setLabel(u.GameVars.gameData.musicMuted?"MUSIC ON":"MUSIC OFF")})];i.GameConstants.DEVELOPMENT&&a.push(new c.MenuButton(n.scene,"CHANGE MAP",function(){return o.GameManager.enterMapScene()})),i.GameConstants.GAME_ONLY||a.push(new c.MenuButton(n.scene,"EXIT",function(){return o.GameManager.events.emit("exit")}));var r=new Phaser.GameObjects.Container(n.scene);r.setPosition(0,-i.GameConstants.GAME_HEIGHT/4);var d=new Phaser.GameObjects.Graphics(n.scene);r.add(d);var m=30,h=new l.MenuTitle(n.scene,"PAUSED");return h.setPosition(0,m+h.height/2),r.add(h),m+=h.height+40,a.forEach(function(e){e.setPosition(0,m+e.height/2),r.add(e),m+=e.height+10}),m-=10,m+=30,d.fillStyle(720958),d.fillRect(-200,0,400,m-10),d.alpha=.75,n.add(r),n.setScale(.95),n.setAlpha(.7),n.scene.tweens.add({targets:n,scaleX:1,scaleY:1,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:250}),s.AudioManager.playSound("menu_emerging"),n}return r(t,e),t}(Phaser.GameObjects.Container);t.PauseMenu=d},485:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=function(e){function t(t,n){var a=e.call(this,t)||this;return a.img=a.scene.add.sprite(0,0,"texture_atlas_1","bullet_fx_3"),a.img.setOrigin(.5,1),a.img.setScale(.25),a.add(a.img),a.glueBullet=n,a.visible=!1,a.x=a.glueBullet.x*s.GameConstants.CELLS_SIZE,a.y=a.glueBullet.y*s.GameConstants.CELLS_SIZE,a.initialPosition={x:a.x,y:a.y},a}return r(t,e),t.prototype.update=function(e,t){var n;n=s.GameConstants.INTERPOLATE_TRAJECTORIES?.3:1;var a=(this.glueBullet.x*s.GameConstants.CELLS_SIZE-this.x)*n,r=(this.glueBullet.y*s.GameConstants.CELLS_SIZE-this.y)*n;if(this.x+=a,this.y+=r,this.rotation=Math.atan2(r,a)+.5*Math.PI,!this.visible){var o=this.initialPosition.x-this.x,i=this.initialPosition.y-this.y;Math.sqrt(o*o+i*i)>20&&(this.visible=!0)}},t}(Phaser.GameObjects.Container);t.GlueBulletActor=o},486:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(64),o=n(36),i=function(e){function t(t){var n=e.call(this,t)||this,a=new Phaser.GameObjects.Image(n.scene,0,0,"texture_atlas_1","title_area");n.add(a);var r=new Phaser.GameObjects.Text(n.scene,0,0,"ROUND  "+o.BattleManager.engine.round+"  COMPLETED",{fontFamily:"Rubik-Regular",fontSize:"28px",color:"#FFFFFF"});return r.setOrigin(.5),n.add(r),n.alpha=0,n.scene.tweens.add({targets:n,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:500}),n.scene.tweens.add({targets:n,alpha:0,ease:Phaser.Math.Easing.Cubic.Out,duration:500,delay:2e3,onComplete:function(){s.BoardContainer.currentInstance.hideRoundCompletedLayer()},onCOmpleteScope:n}),n}return r(t,e),t}(Phaser.GameObjects.Container);t.RoundCompletedLayer=i},487:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(488),o=n(489),i=n(36),u=n(19),c=n(23),l=function(e){function t(t){var n=e.call(this,t)||this;n.scaleY=u.GameVars.scaleY;var a=new Phaser.GameObjects.Image(n.scene,66,4,"texture_atlas_1","menu_bar");a.setOrigin(0),n.add(a),n.menuButton=new Phaser.GameObjects.Image(n.scene,35,45,"texture_atlas_1","btn_menu"),n.menuButton.setInteractive(),n.menuButton.on("pointerdown",function(){n.onClickMenu()}),n.menuButton.on("pointerover",function(){n.onBtnOver(n.menuButton)}),n.menuButton.on("pointerout",function(){n.onBtnOut(n.menuButton)}),n.add(n.menuButton),n.buyTurrets=new o.BuyTurrets(n.scene),n.add(n.buyTurrets),n.timeStepButton=new Phaser.GameObjects.Image(n.scene,560,45,"texture_atlas_1","btn_x1"),n.timeStepButton.setInteractive(),n.timeStepButton.on("pointerdown",function(){n.onClickTimeStep()}),n.timeStepButton.on("pointerover",function(){n.onBtnOver(n.timeStepButton)}),n.timeStepButton.on("pointerout",function(){n.onBtnOut(n.timeStepButton)}),n.add(n.timeStepButton),n.pauseButton=new Phaser.GameObjects.Image(n.scene,640,45,"texture_atlas_1","btn_pause"),n.pauseButton.setInteractive(),n.pauseButton.on("pointerdown",function(){n.onClickPause()}),n.pauseButton.on("pointerover",function(){n.onBtnOver(n.pauseButton)}),n.pauseButton.on("pointerout",function(){n.onBtnOut(n.pauseButton)}),n.add(n.pauseButton),n.autoButton=new Phaser.GameObjects.Image(n.scene,720,45,"texture_atlas_1","btn_auto"),n.autoButton.setInteractive(),n.autoButton.on("pointerdown",function(){n.onClickAuto()}),n.autoButton.on("pointerover",function(){n.onBtnOver(n.autoButton)}),n.autoButton.on("pointerout",function(){n.onBtnOut(n.autoButton)}),n.add(n.autoButton);var r=u.GameVars.currentMapData.path[0],s=u.GameVars.currentMapData.path[1],l=c.GameConstants.GAME_WIDTH/2,d=(c.GameConstants.GAME_HEIGHT/2+c.GameConstants.CELLS_SIZE)/u.GameVars.scaleY;return l-=c.GameConstants.CELLS_SIZE*u.GameVars.currentMapData.size.c/2*u.GameVars.scaleCorrectionFactor,d-=c.GameConstants.CELLS_SIZE*u.GameVars.currentMapData.size.r/2*u.GameVars.scaleCorrectionFactor,l+=(c.GameConstants.CELLS_SIZE*s.c+c.GameConstants.CELLS_SIZE/2)*u.GameVars.scaleCorrectionFactor,d+=(c.GameConstants.CELLS_SIZE*s.r+c.GameConstants.CELLS_SIZE/2)*u.GameVars.scaleCorrectionFactor,n.nextWaveButton=new Phaser.GameObjects.Image(n.scene,l,d,"texture_atlas_1","btn_next_wave"),n.nextWaveButton.setInteractive(),n.nextWaveButton.on("pointerdown",function(){n.onClickNextWave()}),n.nextWaveButton.on("pointerover",function(){n.onBtnOver(n.nextWaveButton)}),n.nextWaveButton.on("pointerout",function(){n.onBtnOut(n.nextWaveButton)}),n.nextWaveButton.setScale(1),n.add(n.nextWaveButton),r.c<s.c?(n.nextWaveButton.angle=90,n.nextWaveButton.x+=35*u.GameVars.scaleCorrectionFactor):r.c>s.c?(n.nextWaveButton.angle=-90,n.nextWaveButton.x-=35*u.GameVars.scaleCorrectionFactor):r.r<s.r&&(n.nextWaveButton.angle=180,n.nextWaveButton.y+=35*u.GameVars.scaleCorrectionFactor),n.scene.time.addEvent({delay:3e3,callback:function(){1===n.nextWaveButton.alpha&&i.BattleManager.engine.noEnemiesOnStage&&n.scene.tweens.add({targets:n.nextWaveButton,scaleX:1.1,scaleY:1.1,ease:Phaser.Math.Easing.Cubic.Out,duration:200,yoyo:!0})},callbackScope:n,loop:!0}),u.GameVars.autoSendWave?n.autoButton.setFrame("btn_auto"):n.autoButton.setFrame("btn_auto_off"),n}return r(t,e),t.prototype.createTurret=function(e){this.turretSelected=new s.TurretSelected(this.scene,e,this),this.add(this.turretSelected)},t.prototype.removeTurret=function(){this.remove(this.turretSelected),this.turretSelected=null},t.prototype.activeNextWave=function(){this.scene.tweens.add({targets:this.nextWaveButton,alpha:1,ease:Phaser.Math.Easing.Cubic.Out,duration:200})},t.prototype.onClickNextWave=function(){1!==this.nextWaveButton.alpha||u.GameVars.paused||i.BattleManager.engine.gameOver||(this.nextWaveButton.alpha=0,this.nextWaveButton.setScale(1),i.BattleManager.newWave())},t.prototype.onClickTimeStep=function(){1!==this.timeStepButton.alpha||u.GameVars.paused||(1===u.GameVars.timeStepFactor?(i.BattleManager.setTimeStepFactor(4),this.timeStepButton.setFrame("btn_x4")):4===u.GameVars.timeStepFactor?(i.BattleManager.setTimeStepFactor(8),this.timeStepButton.setFrame("btn_x8")):(i.BattleManager.setTimeStepFactor(1),this.timeStepButton.setFrame("btn_x1")))},t.prototype.onClickMenu=function(){i.BattleManager.engine.gameOver||i.BattleManager.onClickMenu()},t.prototype.onClickPause=function(){u.GameVars.paused||(u.GameVars.semipaused?(i.BattleManager.semiresume(),this.pauseButton.setFrame("btn_pause")):(i.BattleManager.semipause(),this.pauseButton.setFrame("btn_play")))},t.prototype.onClickAuto=function(){u.GameVars.autoSendWave?(this.autoButton.setFrame("btn_auto_off"),i.BattleManager.setAutoSendWave(!1)):(this.autoButton.setFrame("btn_auto"),i.BattleManager.setAutoSendWave(!0))},t.prototype.onBtnOver=function(e){1===e.alpha&&e.setScale(1.1)},t.prototype.onBtnOut=function(e){1===e.alpha&&e.setScale(1)},t}(Phaser.GameObjects.Container);t.GUI=l},488:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),i=n(23),u=n(19),c=s(n(29)),l=function(e){function t(t,n,a){var r,s,o=e.call(this,t)||this;o.prevWorldY=0,o.scene.sys.game.device.os.desktop?o.offY=0:o.offY=-30,o.turretType=n,o.gui=a;var l=i.GameConstants.CELLS_SIZE;switch(n){case c.GameConstants.TURRET_PROJECTILE:r="base_1_1",s="canon_1_1_1",l*=2.5;break;case c.GameConstants.TURRET_LASER:r="base_2_1",s="canon_2_1_1",l*=3.05;break;case c.GameConstants.TURRET_LAUNCH:r="base_4_1",s="canon_4_1_1",l*=2.5;break;case c.GameConstants.TURRET_GLUE:r="base_3_1",l*=1.5}o.base=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1",r),o.add(o.base),n!==c.GameConstants.TURRET_GLUE&&(o.canon=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1",s),o.add(o.canon));var d="";switch(n){case c.GameConstants.TURRET_LAUNCH:d="yellow";break;case c.GameConstants.TURRET_PROJECTILE:d="green";break;case c.GameConstants.TURRET_LASER:d="pink";break;case c.GameConstants.TURRET_GLUE:d="blue"}var m=new Phaser.GameObjects.Image(o.scene,0,0,"texture_atlas_1","area_"+d);return m.setScale(2*l/m.width),o.add(m),o.scene.sys.updateList.add(o),o.scene.input.on("pointerup",function(e){o.onPointerUp(e)},o),o.scene.input.on("pointerdown",function(e){o.onPointerMove(e)},o),o.scene.input.on("pointermove",function(e){o.onPointerMove(e)},o),u.GameVars.turretSelectedOn=!0,o}return r(t,e),t.prototype.preUpdate=function(e,t){!this.scene.input.activePointer.isDown&&u.GameVars.turretSelectedOn&&this.onPointerUp(this.scene.input.activePointer)},t.prototype.onPointerMove=function(e){this.scene.sys.game.device.os.desktop||(this.prevWorldY>i.GameConstants.GAME_HEIGHT/4&&e.worldY<=i.GameConstants.GAME_HEIGHT/4?this.offY=-60:this.prevWorldY<.75*i.GameConstants.GAME_HEIGHT&&e.worldY>=.75*i.GameConstants.GAME_HEIGHT&&(this.offY=60)),this.setPosition(e.x,(e.y+this.offY)/u.GameVars.scaleY),this.prevWorldY=e.worldY},t.prototype.onPointerUp=function(e){var t=(e.x-i.GameConstants.GAME_WIDTH/2)/u.GameVars.scaleCorrectionFactor+u.GameVars.currentMapData.size.c*i.GameConstants.CELLS_SIZE/2,n=(e.y+this.offY-i.GameConstants.GAME_HEIGHT/2-i.GameConstants.CELLS_SIZE)/(u.GameVars.scaleCorrectionFactor*u.GameVars.scaleY)+u.GameVars.currentMapData.size.r*i.GameConstants.CELLS_SIZE/2,a=Math.floor(t/i.GameConstants.CELLS_SIZE),r=Math.floor(n/i.GameConstants.CELLS_SIZE);o.BattleManager.addTurretToScene(this.turretType,{r:r,c:a}),this.scene.input.removeAllListeners(),this.gui.removeTurret(),u.GameVars.turretSelectedOn=!1},t}(Phaser.GameObjects.Container);t.TurretSelected=l},489:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(490),i=s(n(29)),u=function(e){function t(t){var n=e.call(this,t)||this;n.y=33,n.x=130,n.turretButtons=[];for(var a=[i.GameConstants.TURRET_PROJECTILE,i.GameConstants.TURRET_LASER,i.GameConstants.TURRET_LAUNCH,i.GameConstants.TURRET_GLUE],r=0;r<4;r++){var s=new o.TurretButton(n.scene,a[r],r);n.add(s),n.turretButtons.push(s)}return n}return r(t,e),t}(Phaser.GameObjects.Container);t.BuyTurrets=u},490:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),i=n(19),u=s(n(29)),c=function(e){function t(t,n,a){var r=e.call(this,t)||this;r.x=80*a,r.turretType=n,r.base=new Phaser.GameObjects.Image(r.scene,0,25,"texture_atlas_1","turret_"+(a+1)+"_icon"),r.base.setInteractive(),r.base.setOrigin(.5,1),r.base.on("pointerdown",r.onDownTurret,r),r.add(r.base);var s=new Phaser.GameObjects.Image(r.scene,-25,40,"texture_atlas_1","icon_coin_"+(a+1));r.add(s);var i="";switch(n){case u.GameConstants.TURRET_PROJECTILE:i="#05fb2e";break;case u.GameConstants.TURRET_LASER:i="#ff01d8";break;case u.GameConstants.TURRET_LAUNCH:i="#ffed03";break;case u.GameConstants.TURRET_GLUE:i="#00caeb"}var c=o.BattleManager.engine.turretData[r.turretType].price,l=new Phaser.GameObjects.Text(r.scene,8,40,c.toString(),{fontFamily:"Rubik-Regular",fontSize:"22px",color:i});return l.setOrigin(.5),r.add(l),r.scene.sys.updateList.add(r),r}return r(t,e),t.prototype.preUpdate=function(e,t){o.BattleManager.engine.turretData[this.turretType].price>o.BattleManager.engine.credits?.5!==this.alpha&&(this.alpha=.5):1!==this.alpha&&(this.alpha=1)},t.prototype.onDownTurret=function(){1!==this.alpha||i.GameVars.paused||o.BattleManager.engine.gameOver||o.BattleManager.createTurret(this.turretType)},t}(Phaser.GameObjects.Container);t.TurretButton=c},491:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(19),o=n(23),i=n(36),u=function(e){function t(t){var n=e.call(this,t)||this,a=new Phaser.GameObjects.Image(n.scene,0,122*s.GameVars.scaleY,"texture_atlas_1","fx_enemy_traspass");a.setOrigin(1,0),a.setScale((o.GameConstants.GAME_HEIGHT-122*s.GameVars.scaleY)/a.width,.5),a.setAngle(-90),n.add(a);var r=new Phaser.GameObjects.Image(n.scene,o.GameConstants.GAME_WIDTH,122*s.GameVars.scaleY,"texture_atlas_1","fx_enemy_traspass");r.setOrigin(1,0),r.setScale((o.GameConstants.GAME_HEIGHT-122*s.GameVars.scaleY)/a.width,-.5),r.setAngle(-90),n.add(r);var u=new Phaser.GameObjects.Image(n.scene,0,122*s.GameVars.scaleY,"texture_atlas_1","fx_enemy_traspass");u.setOrigin(0),u.setScale(o.GameConstants.GAME_WIDTH/a.width,.5),n.add(u);var c=new Phaser.GameObjects.Image(n.scene,0,o.GameConstants.GAME_HEIGHT,"texture_atlas_1","fx_enemy_traspass");c.setOrigin(0),c.setScale(o.GameConstants.GAME_WIDTH/a.width,-.5),n.add(c);var l=1===s.GameVars.timeStepFactor?800:200;return i.BattleManager.engine.noEnemiesOnStage&&(l*=4),n.scene.tweens.add({targets:n,alpha:0,ease:Phaser.Math.Easing.Cubic.In,duration:l,onComplete:function(){this.destroy()},onCompleteScope:n}),n}return r(t,e),t}(Phaser.GameObjects.Container);t.FxEnemyTraspass=u},492:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(493),o=n(23),i=n(19),u=function(e){function t(){var n=e.call(this,"MapsScene")||this;return t.currentInstance=n,n}return r(t,e),t.prototype.create=function(){var e=this;i.GameVars.currentScene=this,this.cameras.main.setBackgroundColor(16777215),this.midContainer=new Phaser.GameObjects.Container(this),this.midContainer.scaleY=i.GameVars.scaleY,this.midContainer.x=o.GameConstants.GAME_WIDTH/2,this.midContainer.y=135*i.GameVars.scaleY,this.add.existing(this.midContainer),this.lastY=this.midContainer.y,this.isDown=!1,this.input.on("pointerdown",function(t){e.onPointerDown(t)}),this.input.on("pointerup",function(){e.onPointerUp()}),this.input.on("pointerout",function(){e.onPointerUp()}),this.input.on("pointermove",function(t){e.onPointerMove(t)});for(var t=0;t<i.GameVars.mapsData.length;t++){var n=new s.MapInfo(this,i.GameVars.mapsData[t],t);n.x=(t%2==0?0:300)-150,n.y=350*Math.floor(t/2),this.midContainer.add(n)}var a=new Phaser.GameObjects.Container(this);a.scaleY=i.GameVars.scaleY,a.x=o.GameConstants.GAME_WIDTH/2,this.add.existing(a);var r=new Phaser.GameObjects.Graphics(this);r.fillStyle(16777215),r.fillRect(-o.GameConstants.GAME_WIDTH/2,0,o.GameConstants.GAME_WIDTH,130),a.add(r);var u=new Phaser.GameObjects.Graphics(this);u.setPosition(0,65),u.lineStyle(4,0),u.strokeRect(-180,-35,360,70),u.lineStyle(2,0),u.strokeRect(-170,-25,340,50),a.add(u);var c=new Phaser.GameObjects.Text(this,0,45,"CHANGE MAP",{fontFamily:"Rubik-Regular",fontSize:"35px",color:"#000000"});c.setOrigin(.5,0),a.add(c)},t.prototype.onPointerDown=function(e){this.isDown=!0,this.lastY=e.worldY},t.prototype.onPointerUp=function(){this.isDown=!1},t.prototype.onPointerMove=function(e){if(this.isDown){var t=e.worldY;this.midContainer.y-=this.lastY-t,this.lastY=t,this.midContainer.y>135*i.GameVars.scaleY&&(this.midContainer.y=135*i.GameVars.scaleY),this.midContainer.y<-380*i.GameVars.scaleY&&(this.midContainer.y=-380*i.GameVars.scaleY)}},t}(Phaser.Scene);t.MapsScene=u},493:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),o=n(35),i=n(19),u=function(e){function t(t,n,a){var r=e.call(this,t)||this;r.index=a,r.back=new Phaser.GameObjects.Graphics(r.scene),r.back.lineStyle(4,0),r.back.strokeRect(-140,0,280,330),r.back.setInteractive(new Phaser.Geom.Rectangle(-140,0,280,330),Phaser.Geom.Rectangle.Contains),r.back.on("pointerdown",function(e){r.onPointerDown(e)}),r.back.on("pointerup",function(e){r.onPointerUp(e)}),r.back.on("pointerout",function(){r.onPointerOut()}),r.back.on("pointermove",function(){r.onPointerOut()}),r.add(r.back);var o=new Phaser.GameObjects.Text(r.scene,0,5,n.name,{fontFamily:"Rubik-Regular",fontSize:"30px",color:"#000000"});o.setOrigin(.5,0),r.add(o);var u=new Phaser.GameObjects.Text(r.scene,0,40,"Score: "+i.GameVars.formatNumber(i.GameVars.gameData.scores[a]),{fontFamily:"Rubik-Regular",fontSize:"25px",color:"#000000"});u.setOrigin(.5,0),r.add(u);if(0===n.plateaus.length){var c=new Phaser.GameObjects.Graphics(r.scene);c.setPosition(-n.size.c/2*s.GameConstants.CELLS_SIZE*.25,85),c.fillStyle(10066329),c.fillRect(0,0,n.size.c*s.GameConstants.CELLS_SIZE*.25,n.size.r*s.GameConstants.CELLS_SIZE*.25),r.add(c)}else for(var l=0;l<n.plateaus.length;l++){(d=new Phaser.GameObjects.Graphics(r.scene)).setPosition(-n.size.c/2*s.GameConstants.CELLS_SIZE*.25,85),d.fillStyle(10066329),d.fillRect(.25*s.GameConstants.CELLS_SIZE*n.plateaus[l].c,.25*s.GameConstants.CELLS_SIZE*n.plateaus[l].r,.25*s.GameConstants.CELLS_SIZE,.25*s.GameConstants.CELLS_SIZE),r.add(d)}for(l=0;l<n.path.length;l++){var d;if(-1!==n.path[l].c&&-1!==n.path[l].r&&n.path[l].c!==n.size.c&&n.path[l].r!==n.size.r)(d=new Phaser.GameObjects.Graphics(r.scene)).setPosition(-n.size.c/2*s.GameConstants.CELLS_SIZE*.25,85),d.fillStyle(0),d.fillRect(.25*s.GameConstants.CELLS_SIZE*n.path[l].c,.25*s.GameConstants.CELLS_SIZE*n.path[l].r,.25*s.GameConstants.CELLS_SIZE,.25*s.GameConstants.CELLS_SIZE),r.add(d)}return r}return r(t,e),t.prototype.onPointerDown=function(e){this.downY=e.worldY,this.back.clear(),this.back.fillStyle(14540253),this.back.fillRect(-140,0,280,330),this.back.lineStyle(4,0),this.back.strokeRect(-140,0,280,330)},t.prototype.onPointerUp=function(e){this.onPointerOut(),this.downY===e.worldY&&o.GameManager.mapSelected(this.index)},t.prototype.onPointerOut=function(){this.back.clear(),this.back.fillStyle(16777215),this.back.fillRect(-140,0,280,330),this.back.lineStyle(4,0),this.back.strokeRect(-140,0,280,330)},t}(Phaser.GameObjects.Container);t.MapInfo=u},494:function(e,t,n){var a=n(495);"string"==typeof a&&(a=[[e.i,a,""]]);var r={insert:"head",singleton:!1};n(497)(a,r);a.locals&&(e.exports=a.locals)},495:function(e,t,n){(e.exports=n(496)(!1)).push([e.i,".menu-container {\n    margin-left: auto;\n    margin-right: auto;\n    width: 75vh;\n}\n\n@media screen and (max-aspect-ratio: 3/4) {\n    .menu-container {\n        width: 100vw;\n    };\n}\n",""])},64:function(e,t,n){"use strict";var a,r=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=s(n(29)),i=n(467),u=n(470),c=n(471),l=n(472),d=n(389),m=n(474),h=n(23),f=n(475),p=n(19),_=n(476),y=n(477),g=n(479),v=n(480),b=n(481),G=n(482),E=n(483),O=n(36),S=n(484),T=n(485),C=n(32),x=n(486),M=function(e){function t(n){var a=e.call(this,n)||this;return t.currentInstance=a,a.x=h.GameConstants.GAME_WIDTH/2,a.y=h.GameConstants.GAME_HEIGHT/2+h.GameConstants.CELLS_SIZE,a.scaleX=p.GameVars.scaleCorrectionFactor,a.scaleY=p.GameVars.scaleCorrectionFactor*p.GameVars.scaleY,a.deadEnemyActors=[],a.enemyActors=[],a.turretActors=[],a.bulletActors=[],a.glueBulletActors=[],a.mortarActors=[],a.mineActors=[],a.rangeCircles=[],a.gluePools=[],a.glueCircles=[],a.board=new m.Board(a.scene),a.add(a.board),h.GameConstants.SHOW_DEBUG_GEOMETRY&&a.drawDebugGeometry(),a.pointerContainer=new Phaser.GameObjects.Container(a.scene),a.board.add(a.pointerContainer),a.glueCirclesContainer=new Phaser.GameObjects.Container(a.scene),a.board.add(a.glueCirclesContainer),a.pointerContainer.setInteractive(new Phaser.Geom.Rectangle(0,-h.GameConstants.GAME_HEIGHT,h.GameConstants.GAME_WIDTH,4*h.GameConstants.GAME_HEIGHT),Phaser.Geom.Rectangle.Contains),a.pointerContainer.on("pointerdown",function(){a.onPointerDown()}),a.actorsContainer=new Phaser.GameObjects.Container(a.scene),a.board.add(a.actorsContainer),a.circlesContainer=new Phaser.GameObjects.Container(a.scene),a.board.add(a.circlesContainer),a.createAnimations(),a}return r(t,e),t.prototype.addInitialTowers=function(){this.addTurret(o.GameConstants.TURRET_LASER,{r:0,c:5}),this.addTurret(o.GameConstants.TURRET_LASER,{r:1,c:7}),this.addTurret(o.GameConstants.TURRET_LASER,{r:2,c:4}),this.addTurret(o.GameConstants.TURRET_LASER,{r:3,c:7}),this.addTurret(o.GameConstants.TURRET_LASER,{r:4,c:6}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:0,c:4}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:0,c:6}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:2,c:3}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:2,c:5}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:2,c:7}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:4,c:3}),this.addTurret(o.GameConstants.TURRET_GLUE,{r:4,c:5})},t.prototype.update=function(e,t){for(var n=0;n<this.deadEnemyActors.length;n++){var a=this.enemyActors.indexOf(this.deadEnemyActors[n]);-1!==a&&this.enemyActors.splice(a,1)}this.enemyActors.forEach(function(n){n.update(e,t)}),this.turretActors.forEach(function(n){n.update(e,t)}),this.bulletActors.forEach(function(n){n.update(e,t)}),this.glueBulletActors.forEach(function(n){n.update(e,t)}),this.mortarActors.forEach(function(n){n.update(e,t)})},t.prototype.updateTurretMenu=function(){this.turretMenu&&this.turretMenu.checkAndUpdateInfo()},t.prototype.addEnemy=function(e,t){var n=null;switch(e.type){case o.GameConstants.ENEMY_HEALER:n=new _.HealerEnemyActor(this.scene,e,t);break;default:n=new d.EnemyActor(this.scene,e,t)}n&&(this.actorsContainer.add(n),this.enemyActors.push(n))},t.prototype.removeEnemy=function(e){var t;for(t=0;t<this.enemyActors.length&&this.enemyActors[t].id!==e;t++);var n=this.enemyActors[t];n&&(this.enemyActors.splice(t,1),n.destroy())},t.prototype.addTurret=function(e,t){if(!(t.r<0||t.c<0||t.r>=p.GameVars.currentMapData.size.r||t.c>=p.GameVars.currentMapData.size.c)){for(var n=0;n<p.GameVars.enemiesPathCells.length;n++)if(t.c===p.GameVars.enemiesPathCells[n].c&&t.r===p.GameVars.enemiesPathCells[n].r)return;for(n=0;n<this.turretActors.length;n++)if(t.c===this.turretActors[n].turret.position.c&&t.r===this.turretActors[n].turret.position.r)return;var a=!1;if(0!==p.GameVars.plateausCells.length){for(n=0;n<p.GameVars.plateausCells.length;n++)if(p.GameVars.plateausCells[n].c===t.c&&p.GameVars.plateausCells[n].r===t.r){a=!0;break}}else a=!0;if(a){var r,s=O.BattleManager.addTurret(e,t);if(s){switch(e){case o.GameConstants.TURRET_PROJECTILE:r=new y.ProjectileTurretActor(this.scene,t,s);break;case o.GameConstants.TURRET_LASER:r=new g.LaserTurretActor(this.scene,t,s);break;case o.GameConstants.TURRET_LAUNCH:r=new b.LaunchTurretActor(this.scene,t,s);break;case o.GameConstants.TURRET_GLUE:r=new E.GlueTurretActor(this.scene,t,s)}this.actorsContainer.add(r),this.turretActors.push(r)}}}},t.prototype.removeTurret=function(e){var t;for(this.hideTurretMenu(),this.hideRangeCircles(),t=0;t<this.turretActors.length&&this.turretActors[t].id!==e;t++);var n=this.turretActors[t];n&&(this.turretActors.splice(t,1),n.destroy())},t.prototype.addBullet=function(e,t){this.getTurretActorByID(t.id).shootBullet();var n=new f.BulletActor(this.scene,e);this.board.add(n),this.bulletActors.push(n)},t.prototype.addGlueBullet=function(e,t){this.getTurretActorByID(t.id).shootGlue();var n=new T.GlueBulletActor(this.scene,e);this.board.add(n),this.glueBulletActors.push(n)},t.prototype.addLaserBeam=function(e,t){for(var n=this.getTurretActorByID(e.id),a=[],r=0;r<t.length;r++)a.push(this.getEnemyActorByID(t[r].id));n.shootLaser(a);var s=new v.LaserBeam(this.scene,n,a,e.grade);this.actorsContainer.add(s)},t.prototype.addMortar=function(e,t){this.getTurretActorByID(t.id).shootMortar();var n=new G.MortarActor(this.scene,e);this.actorsContainer.add(n),this.mortarActors.push(n)},t.prototype.addMine=function(e,t){var n=this.getTurretActorByID(t.id);n.shootMine();var a=new u.MineActor(this.scene,e,n);this.actorsContainer.add(a),this.actorsContainer.sendToBack(a),this.mineActors.push(a)},t.prototype.addGlue=function(e,t){var n=this.getTurretActorByID(t.id);n.shootGlue();var a=new l.GluePool(this.scene,n,e);this.board.add(a),this.board.sendActorBack(a),this.gluePools.push(a)},t.prototype.onGlueConsumed=function(e){for(var t=null,n=0;n<this.gluePools.length;n++)if(e.id===this.gluePools[n].id){t=this.gluePools[n],this.gluePools.splice(n,1),t.destroy();break}},t.prototype.onEnemyHit=function(e){var t=this.getEnemyActorByID(e.id);t&&t.hit()},t.prototype.onEnemyGlueHit=function(e){var t=this.getEnemyActorByID(e.id);t&&t.glueHit()},t.prototype.onEnemyKilled=function(e){var t=this.getEnemyActorByID(e.id);t&&(t.die(),this.deadEnemyActors.push(t))},t.prototype.teleportEnemy=function(e,t){var n=this.getEnemyActorByID(e.id);n&&(n.teleport(t),C.AudioManager.playSound("t3_teleport"))},t.prototype.removeBullet=function(e){for(var t=null,n=0;n<this.bulletActors.length;n++)if(this.bulletActors[n].bullet.id===e.id){t=this.bulletActors[n];break}if(t){n=this.bulletActors.indexOf(t);this.bulletActors.splice(n,1),t.destroy()}},t.prototype.removeGlueBullet=function(e){for(var t=null,n=0;n<this.glueBulletActors.length;n++)if(this.glueBulletActors[n].glueBullet.id===e.id){t=this.glueBulletActors[n];break}if(t){n=this.glueBulletActors.indexOf(t);this.glueBulletActors.splice(n,1),t.destroy()}},t.prototype.detonateMortar=function(e){for(var t=null,n=0;n<this.mortarActors.length;n++)if(this.mortarActors[n].mortar.id===e.id){t=this.mortarActors[n];break}t&&t.detonate()},t.prototype.detonateMine=function(e){for(var t=null,n=0;n<this.mineActors.length;n++)if(this.mineActors[n].mine.id===e.id){t=this.mineActors[n];break}t&&t.detonate()},t.prototype.removeMortar=function(e){var t=this.mortarActors.indexOf(e);this.mortarActors.splice(t,1),e.destroy()},t.prototype.removeMine=function(e){var t=this.mineActors.indexOf(e);this.mineActors.splice(t,1),e.destroy()},t.prototype.upgradeTurret=function(e){this.getTurretActorByID(e).upgrade()},t.prototype.improveTurret=function(e){this.getTurretActorByID(e).improve()},t.prototype.getTurretActorByID=function(e){for(var t=null,n=0;n<this.turretActors.length;n++)if(this.turretActors[n].id===e){t=this.turretActors[n];break}return t},t.prototype.getEnemyActorByID=function(e){for(var t=null,n=0;n<this.enemyActors.length;n++)if(this.enemyActors[n].id===e){t=this.enemyActors[n];break}return t},t.prototype.createRangeCircle=function(e,t,n,a){var r=new Phaser.GameObjects.Image(this.scene,t,n,"texture_atlas_1","area_"+a);return r.setScale(2*e/r.width),r.visible=!1,this.circlesContainer.add(r),this.rangeCircles.push(r),r},t.prototype.hideRangeCircles=function(){for(var e=0;e<this.rangeCircles.length;e++)this.rangeCircles[e].visible=!1},t.prototype.showTurretMenu=function(e){this.turretMenu||(this.turretMenu=new c.TurretMenu(this.scene,e),this.add(this.turretMenu))},t.prototype.hideTurretMenu=function(){this.turretMenu&&(this.remove(this.turretMenu),this.turretMenu=null)},t.prototype.showPauseMenu=function(){this.pauseMenu?this.hidePauseMenu():(O.BattleManager.pause(),this.pauseMenu=new S.PauseMenu(this.scene),this.add(this.pauseMenu),this.hideRangeCircles(),this.hideTurretMenu())},t.prototype.hidePauseMenu=function(){this.pauseMenu&&(O.BattleManager.resume(),this.remove(this.pauseMenu),this.pauseMenu=null)},t.prototype.showGameOverLayer=function(){this.gameOverLayer=new i.GameOverLayer(this.scene),this.add(this.gameOverLayer),this.hideTurretMenu(),this.pauseMenu&&this.hidePauseMenu()},t.prototype.showRoundCompletedLayer=function(){8===p.GameVars.timeStepFactor||p.GameVars.autoSendWave||(this.roundCompletedLayer=new x.RoundCompletedLayer(this.scene),this.add(this.roundCompletedLayer))},t.prototype.hideRoundCompletedLayer=function(){this.remove(this.roundCompletedLayer),this.roundCompletedLayer=null},t.prototype.drawDebugGeometry=function(){var e=new Phaser.GameObjects.Graphics(this.scene);e.lineStyle(2,16753920);for(var t=0;t<p.GameVars.enemiesPathCells.length-1;t++){var n=(p.GameVars.enemiesPathCells[t].c+.5)*h.GameConstants.CELLS_SIZE,a=(p.GameVars.enemiesPathCells[t].r+.5)*h.GameConstants.CELLS_SIZE;e.moveTo(n,a),n=(p.GameVars.enemiesPathCells[t+1].c+.5)*h.GameConstants.CELLS_SIZE,a=(p.GameVars.enemiesPathCells[t+1].r+.5)*h.GameConstants.CELLS_SIZE,e.lineTo(n,a),e.stroke()}this.board.add(e)},t.prototype.onPointerDown=function(){this.pauseMenu?this.hidePauseMenu():(this.hideRangeCircles(),this.hideTurretMenu())},t.prototype.createAnimations=function(){this.scene.anims.create({key:"enemy_soldier_run",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_soldier_",start:1,end:6,zeroPad:1,suffix:""}),frameRate:12,repeat:-1}),this.scene.anims.create({key:"enemy_runner_run",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_runner_",start:1,end:6,zeroPad:1,suffix:""}),frameRate:12,repeat:-1}),this.scene.anims.create({key:"enemy_healer_run",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_healer_",start:1,end:6,zeroPad:1,suffix:""}),frameRate:12,repeat:-1}),this.scene.anims.create({key:"enemy_flier_run",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_flier_",start:1,end:5,zeroPad:1,suffix:""}),frameRate:12,repeat:-1}),this.scene.anims.create({key:"enemy_blob_run",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_blob_",start:1,end:5,zeroPad:1,suffix:""}),frameRate:12,repeat:-1}),this.scene.anims.create({key:"enemy_healer_heal",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_healing_",start:1,end:6,zeroPad:1,suffix:""}),frameRate:12,repeat:-1}),this.scene.anims.create({key:"enemy_soldier_run_frozen",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_soldier_",start:1,end:6,zeroPad:1,suffix:"_frozen"}),frameRate:8,repeat:-1}),this.scene.anims.create({key:"enemy_runner_run_frozen",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_runner_",start:1,end:6,zeroPad:1,suffix:"_frozen"}),frameRate:8,repeat:-1}),this.scene.anims.create({key:"enemy_healer_run_frozen",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_healer_",start:1,end:6,zeroPad:1,suffix:"_frozen"}),frameRate:8,repeat:-1}),this.scene.anims.create({key:"enemy_flier_run_frozen",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_flier_",start:1,end:5,zeroPad:1,suffix:"_frozen"}),frameRate:8,repeat:-1}),this.scene.anims.create({key:"enemy_blob_run_frozen",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_blob_",start:1,end:5,zeroPad:1,suffix:"_frozen"}),frameRate:8,repeat:-1}),this.scene.anims.create({key:"enemy_healer_heal_frozen",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"enemy_healing_",start:1,end:6,zeroPad:1,suffix:"_frozen"}),frameRate:8,repeat:-1}),this.scene.anims.create({key:"glue_fx",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"fx_snow_shoot_",start:1,end:16,zeroPad:1,suffix:""}),frameRate:12,repeat:0}),this.scene.anims.create({key:"explosion",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"tower4_fx_",start:1,end:21,zeroPad:2,suffix:""}),frameRate:60,repeat:0}),this.scene.anims.create({key:"mine",frames:this.scene.anims.generateFrameNames("texture_atlas_1",{prefix:"mina_",start:1,end:5,zeroPad:2,suffix:""}),frameRate:30,repeat:0})},t}(Phaser.GameObjects.Container);t.BoardContainer=M},72:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),s=a(n(73)),o=a(n(106));t.Loading=function(e){var t=e.progress,n=e.opacity,a=void 0===n?1:n;return r.default.createElement("div",{style:{height:"100vh",width:"100vw",position:"absolute",opacity:a,zIndex:1}},r.default.createElement(s.default,{open:!0},r.default.createElement(o.default,{color:"secondary",variant:t?"static":"indeterminate",value:t})))}}});
//# sourceMappingURL=app-b80a57a5ff697cd36c71-bundle.js.map

